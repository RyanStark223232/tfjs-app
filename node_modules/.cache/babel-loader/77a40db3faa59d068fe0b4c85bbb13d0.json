{"ast":null,"code":"import _toConsumableArray from\"C:/Users/wongh/Documents/GitHub/tfjs-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:/Users/wongh/Documents/GitHub/tfjs-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/wongh/Documents/GitHub/tfjs-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/wongh/Documents/GitHub/tfjs-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/wongh/Documents/GitHub/tfjs-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/wongh/Documents/GitHub/tfjs-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/wongh/Documents/GitHub/tfjs-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/wongh/Documents/GitHub/tfjs-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from\"react\";import Button from'@material-ui/core/Button';import*as handpose from\"@tensorflow-models/handpose\";import*as posenet from\"@tensorflow-models/posenet\";import*as facemesh from\"@tensorflow-models/facemesh\";//import * as tf from '@tensorflow/tfjs-core';\nimport Webcam from\"react-webcam\";import\"./App.css\";import{drawHand_tap,drawHand_rotate,drawHand_fist,drawHand_still,writeText,drawKeypoints,drawSkeleton,drawMesh}from\"./utilities\";import{sqrt,pow}from\"mathjs\";import{Line}from'react-chartjs-2';import handline from'./HandLines1.jpg';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.sleep=function(milliseconds){return new Promise(function(resolve){return setTimeout(resolve,milliseconds);});};_this.exportToJson=function(objectData,filename){var contentType=\"application/json;charset=utf-8;\";if(window.navigator&&window.navigator.msSaveOrOpenBlob){var blob=new Blob([decodeURIComponent(encodeURI(JSON.stringify(objectData)))],{type:contentType});navigator.msSaveOrOpenBlob(blob,filename);}else{var a=document.createElement('a');a.download=filename;a.href='data:'+contentType+','+encodeURIComponent(JSON.stringify(objectData));a.target='_blank';document.body.appendChild(a);a.click();document.body.removeChild(a);}};_this.getArray=function(){var remark=document.getElementById(\"Remarks\").value;var ID=Date().toString();var dict={remark:remark,dist_array_L:_this.state.dist_array_L,dist_time_array_L:_this.state.dist_time_array_L,rotate_array_L:_this.state.rotate_array_L,rotate_time_array_L:_this.state.rotate_time_array_L,fist_array_L:_this.state.fist_array_L,fist_time_array_L:_this.state.fist_time_array_L,still_array_L:_this.state.still_array_L,still_time_array_L:_this.state.still_time_array_L,hand_dist_array_L:_this.state.hand_dist_array_L,hand_rotate_array_L:_this.state.hand_rotate_array_L,hand_fist_array_L:_this.state.hand_fist_array_L,hand_still_array_L:_this.state.hand_still_array_L,dist_array_R:_this.state.dist_array_R,dist_time_array_R:_this.state.dist_time_array_R,rotate_array_R:_this.state.rotate_array_R,rotate_time_array_R:_this.state.rotate_time_array_R,fist_array_R:_this.state.fist_array_R,fist_time_array_R:_this.state.fist_time_array_R,still_array_R:_this.state.still_array_R,still_time_array_R:_this.state.still_time_array_R,hand_dist_array_R:_this.state.hand_dist_array_R,hand_rotate_array_R:_this.state.hand_rotate_array_R,hand_fist_array_R:_this.state.hand_fist_array_R,hand_still_array_R:_this.state.hand_still_array_R};var PD=document.getElementById(\"PD\").value;var Score=document.getElementById(\"Score\").value;var PID=document.getElementById(\"Patient_ID\").value;console.log(PD,Score);_this.exportToJson(dict,\"ID \"+PID+\" Record \"+ID+\" Label \"+PD+\" \"+Score);};_this.state={ID:0,tap_count:[],rotate_count:[],fist_count:[],last_hand_L:[],last_hand_R:[],index_passed:0,min_dist:0,max_dist:999.0,rotate_passed:0,last_pressed:0,real_time_inferencing:false,recording:false,button_mode:false,chart_ready:false,finger_done:false,rotate_done:false,fist_done:false,hand_dist_array_L:[],hand_dist_array_R:[],hand_rotate_array_L:[],hand_rotate_array_R:[],hand_fist_array_L:[],hand_fist_array_R:[],hand_still_array_L:[],hand_still_array_R:[],dist_array_L:[],dist_time_array_L:[],dist_record_L:[],dist_time_record_L:[],dist_array_R:[],dist_time_array_R:[],dist_record_R:[],dist_time_record_R:[],rotate_array_L:[],rotate_time_array_L:[],rotate_record_L:[],rotate_time_record_L:[],rotate_array_R:[],rotate_time_array_R:[],rotate_record_R:[],rotate_time_record_R:[],fist_array_L:[],fist_time_array_L:[],fist_record_L:[],fist_time_record_L:[],fist_array_R:[],fist_time_array_R:[],fist_record_R:[],fist_time_record_R:[],still_array_L:[],still_time_array_L:[],still_record_L:[],still_time_record_L:[],still_array_R:[],still_time_array_R:[],still_record_R:[],still_time_record_R:[],chart_data1_L:null,chart_data1_R:null,chart_data2_L:null,chart_data2_R:null,chart_data3_L:null,chart_data3_R:null,chart_data4_L:null,chart_data4_R:null,stage:0,wait:false,wait_till:0,max_tremor_L:0.0,max_tremor_R:0.0,startAt:Date.now(),dead_frame:0,raw:true,facingMode:\"user\",avg_fps:0};_this.webcamRef=/*#__PURE__*/React.createRef(null);_this.canvasRef=/*#__PURE__*/React.createRef(null);_this.videoConstraints={facingMode:\"user\"};_this.capture_interval=50;_this.runHandpose=_this.runHandpose.bind(_assertThisInitialized(_this));_this.stop_real_time_inference=_this.stop_real_time_inference.bind(_assertThisInitialized(_this));_this.stop_tapping=_this.stop_tapping.bind(_assertThisInitialized(_this));_this.stop_rotating=_this.stop_rotating.bind(_assertThisInitialized(_this));_this.stop_gripping=_this.stop_gripping.bind(_assertThisInitialized(_this));_this.stop_record=_this.stop_record.bind(_assertThisInitialized(_this));_this.record_video=_this.record_video.bind(_assertThisInitialized(_this));_this.concat_frame=_this.concat_frame.bind(_assertThisInitialized(_this));_this.inference=_this.inference.bind(_assertThisInitialized(_this));_this.reset_counter=_this.reset_counter.bind(_assertThisInitialized(_this));_this.increment_tap1=_this.increment_tap1.bind(_assertThisInitialized(_this));_this.increment_tap2=_this.increment_tap2.bind(_assertThisInitialized(_this));_this.switch_button=_this.switch_button.bind(_assertThisInitialized(_this));_this.compose_chart=_this.compose_chart.bind(_assertThisInitialized(_this));_this.runPosenet=_this.runPosenet.bind(_assertThisInitialized(_this));_this.real_time_posenet=_this.real_time_posenet.bind(_assertThisInitialized(_this));_this.runFacemesh=_this.runFacemesh.bind(_assertThisInitialized(_this));_this.real_time_facemesh=_this.real_time_facemesh.bind(_assertThisInitialized(_this));_this.switch_style=_this.switch_style.bind(_assertThisInitialized(_this));_this.switch_cam=_this.switch_cam.bind(_assertThisInitialized(_this));_this.getArray=_this.getArray.bind(_assertThisInitialized(_this));_this.exportToJson=_this.exportToJson.bind(_assertThisInitialized(_this));_this.next_step=_this.next_step.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"switch_cam\",value:function switch_cam(){if(this.state.facingMode===\"user\")this.setState({facingMode:\"environment\"});else if(this.state.facingMode===\"environment\")this.setState({facingMode:\"user\"});}},{key:\"runFacemesh\",value:function(){var _runFacemesh=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var net,Interval_ID;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:require('@tensorflow/tfjs-backend-webgl');_context.next=3;return facemesh.load();case 3:net=_context.sent;console.log(\"Facemesh model loaded.\");this.setState({startAt:Date.now()});Interval_ID=setInterval(function(){_this2.real_time_facemesh(net);},this.capture_interval);this.setState({ID:Interval_ID,real_time_inferencing:true});case 8:case\"end\":return _context.stop();}}},_callee,this);}));function runFacemesh(){return _runFacemesh.apply(this,arguments);}return runFacemesh;}()},{key:\"real_time_facemesh\",value:function(){var _real_time_facemesh=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(net){var video,videoWidth,videoHeight,face,ctx;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(this.state.wait){this.setState({wait_till:Date.now()+3000});this.setState({wait:false});}if(!(typeof this.webcamRef.current!==\"undefined\"&&this.webcamRef.current!==null&&this.webcamRef.current.video.readyState===4)){_context2.next=14;break;}video=this.webcamRef.current.video;videoWidth=this.webcamRef.current.video.videoWidth;videoHeight=this.webcamRef.current.video.videoHeight;this.webcamRef.current.video.width=videoWidth;this.webcamRef.current.video.height=videoHeight;this.canvasRef.current.width=videoWidth;this.canvasRef.current.height=videoHeight;_context2.next=11;return net.estimateFaces(video);case 11:face=_context2.sent;ctx=this.canvasRef.current.getContext(\"2d\");drawMesh(face,ctx);case 14:case\"end\":return _context2.stop();}}},_callee2,this);}));function real_time_facemesh(_x){return _real_time_facemesh.apply(this,arguments);}return real_time_facemesh;}()},{key:\"runPosenet\",value:function(){var _runPosenet=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _this3=this;var net,Interval_ID;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:require('@tensorflow/tfjs-backend-webgl');_context3.next=3;return posenet.load();case 3:net=_context3.sent;console.log(\"PoseNet model loaded.\");this.setState({startAt:Date.now()});Interval_ID=setInterval(function(){_this3.real_time_posenet(net);},this.capture_interval);this.setState({ID:Interval_ID,real_time_inferencing:true});case 8:case\"end\":return _context3.stop();}}},_callee3,this);}));function runPosenet(){return _runPosenet.apply(this,arguments);}return runPosenet;}()},{key:\"real_time_posenet\",value:function(){var _real_time_posenet=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(net){var video,videoWidth,videoHeight,pose,ctx;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(this.state.wait){this.setState({wait_till:Date.now()+3000,wait:false});}if(!(typeof this.webcamRef.current!==\"undefined\"&&this.webcamRef.current!==null&&this.webcamRef.current.video.readyState===4)){_context4.next=15;break;}video=this.webcamRef.current.video;videoWidth=this.webcamRef.current.video.videoWidth;videoHeight=this.webcamRef.current.video.videoHeight;this.webcamRef.current.video.width=videoWidth;this.webcamRef.current.video.height=videoHeight;this.canvasRef.current.width=videoWidth;this.canvasRef.current.height=videoHeight;_context4.next=11;return net.estimateSinglePose(video);case 11:pose=_context4.sent;ctx=this.canvasRef.current.getContext(\"2d\");drawKeypoints(pose[\"keypoints\"],0.6,ctx);drawSkeleton(pose[\"keypoints\"],0.7,ctx);case 15:case\"end\":return _context4.stop();}}},_callee4,this);}));function real_time_posenet(_x2){return _real_time_posenet.apply(this,arguments);}return real_time_posenet;}()},{key:\"switch_style\",value:function(){var _switch_style=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.setState({raw:!this.state.raw});case 2:this.compose_chart();case 3:case\"end\":return _context5.stop();}}},_callee5,this);}));function switch_style(){return _switch_style.apply(this,arguments);}return switch_style;}()},{key:\"compose_chart\",value:function compose_chart(){var time_array_1_L=[];var time_array_1_R=[];var count_array_1_L=[];var count_array_1_R=[];var label_1_L=\"\";var label_1_R=\"\";var time_array_2_L=[];var time_array_2_R=[];var count_array_2_L=[];var count_array_2_R=[];var label_2_L=\"\";var label_2_R=\"\";var time_array_3_L=[];var time_array_3_R=[];var count_array_3_L=[];var count_array_3_R=[];var label_3_L=\"\";var label_3_R=\"\";var time_array_4_L=[];var time_array_4_R=[];var count_array_4_L=[];var count_array_4_R=[];var label_4_L=\"\";var label_4_R=\"\";var real_dist_v=document.getElementById(\"real_measurement_v\").value;var real_dist_h=document.getElementById(\"real_measurement_h\").value;var avg_fps=this.state.hand_dist_array_L.length/(this.state.dist_time_array_L[this.state.dist_time_array_L.length-1]-this.state.dist_time_array_L[0]);this.setState({avg_fps:avg_fps});if(this.state.raw){// Print Data Raw\nif(this.state.dist_array_L.length>100){time_array_1_L=this.state.dist_time_array_L.slice(10,this.state.dist_time_array_L.length-20);count_array_1_L=this.state.dist_array_L.slice(10,this.state.dist_array_L.length-20);}else{time_array_1_L=_toConsumableArray(this.state.dist_time_array_L);count_array_1_L=_toConsumableArray(this.state.dist_array_L);}if(this.state.dist_array_R.length>100){time_array_1_R=this.state.dist_time_array_R.slice(10,this.state.dist_time_array_R.length-20);count_array_1_R=this.state.dist_array_R.slice(10,this.state.dist_array_R.length-20);}else{time_array_1_R=_toConsumableArray(this.state.dist_time_array_R);count_array_1_R=_toConsumableArray(this.state.dist_array_R);}if(this.state.rotate_array_L.length>100){time_array_2_L=this.state.rotate_time_array_L.slice(10,this.state.rotate_time_array_L.length-20);count_array_2_L=this.state.rotate_array_L.slice(10,this.state.rotate_array_L.length-20);}else{time_array_2_L=_toConsumableArray(this.state.rotate_time_array_L);count_array_2_L=_toConsumableArray(this.state.rotate_array_L);}if(this.state.rotate_array_R.length>100){time_array_2_R=this.state.rotate_time_array_R.slice(10,this.state.rotate_time_array_R.length-20);count_array_2_R=this.state.rotate_array_R.slice(10,this.state.rotate_array_R.length-20);}else{time_array_2_R=_toConsumableArray(this.state.rotate_time_array_R);count_array_2_R=_toConsumableArray(this.state.rotate_array_R);}if(this.state.fist_array_L.length>100){time_array_3_L=this.state.fist_time_array_L.slice(10,this.state.fist_time_array_L.length-20);count_array_3_L=this.state.fist_array_L.slice(10,this.state.fist_array_L.length-20);}else{time_array_3_L=_toConsumableArray(this.state.fist_time_array_L);count_array_3_L=_toConsumableArray(this.state.fist_array_L);}if(this.state.fist_array_R.length>100){time_array_3_R=this.state.fist_time_array_R.slice(10,this.state.fist_time_array_R.length-20);count_array_3_R=this.state.fist_array_R.slice(10,this.state.fist_array_R.length-20);}else{time_array_3_R=_toConsumableArray(this.state.fist_time_array_R);count_array_3_R=_toConsumableArray(this.state.fist_array_R);}if(this.state.still_array_L.length>100){time_array_4_L=this.state.still_time_array_L.slice(10,this.state.still_time_array_L.length-20);count_array_4_L=this.state.still_array_L.slice(10,this.state.still_array_L.length-20);}else{time_array_4_L=_toConsumableArray(this.state.still_time_array_L);count_array_4_L=_toConsumableArray(this.state.still_array_L);}if(this.state.still_array_R.length>100){time_array_4_R=this.state.still_time_array_R.slice(10,this.state.still_time_array_R.length-20);count_array_4_R=this.state.still_array_R.slice(10,this.state.still_array_R.length-20);}else{time_array_4_R=_toConsumableArray(this.state.still_time_array_R);count_array_4_R=_toConsumableArray(this.state.still_array_R);}// Change to Real Life Measurement\nif(real_dist_v>0.0001&&real_dist_h>0.0001){label_1_L=\"Distance between Index and Thumb (cm)\";label_1_R=\"Distance between Index and Thumb (cm)\";label_2_L=\"Relative Location between Left and Right of Hand (cm)\";label_2_R=\"Relative Location between Left and Right of Hand (cm)\";label_3_L=\"Relative Location between Tip of Fingers and Finger Joints (cm)\";label_3_R=\"Relative Location between Tip of Fingers and Finger Joints (cm)\";label_4_L=\"Relative Location Moved (cm)\";label_4_R=\"Relative Location Moved (cm)\";var i=0;var tmp=0;for(i=0;i<count_array_1_L.length;i++){tmp=count_array_1_L[i];count_array_1_L[i]=tmp*real_dist_h;}for(i=0;i<count_array_1_R.length;i++){tmp=count_array_1_R[i];count_array_1_R[i]=tmp*real_dist_h;}for(i=0;i<count_array_2_L.length;i++){tmp=count_array_2_L[i];count_array_2_L[i]=tmp*real_dist_v;}for(i=0;i<count_array_2_R.length;i++){tmp=count_array_2_R[i];count_array_2_R[i]=tmp*real_dist_v;}for(i=0;i<count_array_3_L.length;i++){tmp=count_array_3_L[i];count_array_3_L[i]=tmp*real_dist_h;}for(i=0;i<count_array_3_R.length;i++){tmp=count_array_3_R[i];count_array_3_R[i]=tmp*real_dist_h;}for(i=0;i<count_array_4_L.length;i++){tmp=count_array_4_L[i];count_array_4_L[i]=tmp*real_dist_h;}for(i=0;i<count_array_4_R.length;i++){tmp=count_array_4_R[i];count_array_4_R[i]=tmp*real_dist_h;}}else{label_1_L=\"Distance between Index and Thumb\";label_1_R=\"Distance between Index and Thumb\";label_2_L=\"Relative Location between Left and Right of Hand\";label_2_R=\"Relative Location between Left and Right of Hand\";label_3_L=\"Relative Location between Tip of Fingers and Finger Joints\";label_3_R=\"Relative Location between Tip of Fingers and Finger Joints\";label_4_L=\"Relative Location Moved\";label_4_R=\"Relative Location Moved\";}}// Setup Graphs\nvar data1_L={labels:time_array_1_L,datasets:[{label:label_1_L,fill:false,lineTension:0.3,backgroundColor:'rgba(75,192,192,0.4)',borderColor:'rgba(75,192,192,1)',borderCapStyle:'butt',borderDash:[],borderDashOffset:0.0,borderJoinStyle:'miter',pointBorderColor:'rgba(75,192,192,1)',pointBackgroundColor:'#fff',pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:'rgba(75,192,192,1)',pointHoverBorderColor:'rgba(220,220,220,1)',pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:count_array_1_L}]};var data1_R={labels:time_array_1_R,datasets:[{label:label_1_R,fill:false,lineTension:0.3,backgroundColor:'rgba(75,192,192,0.4)',borderColor:'rgba(75,192,192,1)',borderCapStyle:'butt',borderDash:[],borderDashOffset:0.0,borderJoinStyle:'miter',pointBorderColor:'rgba(75,192,192,1)',pointBackgroundColor:'#fff',pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:'rgba(75,192,192,1)',pointHoverBorderColor:'rgba(220,220,220,1)',pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:count_array_1_R}]};var data2_L={labels:time_array_2_L,datasets:[{label:label_2_L,fill:false,lineTension:0.1,backgroundColor:'rgba(192,75,192,0.4)',borderColor:'rgba(192,75,192,1)',borderCapStyle:'butt',borderDash:[],borderDashOffset:0.0,borderJoinStyle:'miter',pointBorderColor:'rgba(192,75,192,1)',pointBackgroundColor:'#fff',pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:'rgba(192,75,192,1)',pointHoverBorderColor:'rgba(220,220,220,1)',pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:count_array_2_L}]};var data2_R={labels:time_array_2_R,datasets:[{label:label_2_R,fill:false,lineTension:0.1,backgroundColor:'rgba(192,75,192,0.4)',borderColor:'rgba(192,75,192,1)',borderCapStyle:'butt',borderDash:[],borderDashOffset:0.0,borderJoinStyle:'miter',pointBorderColor:'rgba(192,75,192,1)',pointBackgroundColor:'#fff',pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:'rgba(192,75,192,1)',pointHoverBorderColor:'rgba(220,220,220,1)',pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:count_array_2_R}]};var data3_L={labels:time_array_3_L,datasets:[{label:label_3_L,fill:false,lineTension:0.1,backgroundColor:'rgba(192,192,75,0.4)',borderColor:'rgba(192,192,75,1)',borderCapStyle:'butt',borderDash:[],borderDashOffset:0.0,borderJoinStyle:'miter',pointBorderColor:'rgba(192,192,75,1)',pointBackgroundColor:'#fff',pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:'rgba(192,192,75,1)',pointHoverBorderColor:'rgba(220,220,220,1)',pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:count_array_3_L}]};var data3_R={labels:time_array_3_R,datasets:[{label:label_3_R,fill:false,lineTension:0.1,backgroundColor:'rgba(192,192,75,0.4)',borderColor:'rgba(192,192,75,1)',borderCapStyle:'butt',borderDash:[],borderDashOffset:0.0,borderJoinStyle:'miter',pointBorderColor:'rgba(192,192,75,1)',pointBackgroundColor:'#fff',pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:'rgba(192,192,75,1)',pointHoverBorderColor:'rgba(220,220,220,1)',pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:count_array_3_R}]};var data4_L={labels:time_array_4_L,datasets:[{label:label_4_L,fill:false,lineTension:0.1,backgroundColor:'rgba(75,192,75,0.4)',borderColor:'rgba(75,192,75,1)',borderCapStyle:'butt',borderDash:[],borderDashOffset:0.0,borderJoinStyle:'miter',pointBorderColor:'rgba(75,192,75,1)',pointBackgroundColor:'#fff',pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:'rgba(75,192,75,1)',pointHoverBorderColor:'rgba(220,220,220,1)',pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:count_array_4_L}]};var data4_R={labels:time_array_4_R,datasets:[{label:label_4_R,fill:false,lineTension:0.1,backgroundColor:'rgba(75,192,75,0.4)',borderColor:'rgba(75,192,75,1)',borderCapStyle:'butt',borderDash:[],borderDashOffset:0.0,borderJoinStyle:'miter',pointBorderColor:'rgba(75,192,75,1)',pointBackgroundColor:'#fff',pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:'rgba(75,192,75,1)',pointHoverBorderColor:'rgba(220,220,220,1)',pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:count_array_4_R}]};this.setState({chart_data1_L:data1_L});this.setState({chart_data1_R:data1_R});this.setState({chart_data2_L:data2_L});this.setState({chart_data2_R:data2_R});this.setState({chart_data3_L:data3_L});this.setState({chart_data3_R:data3_R});this.setState({chart_data4_L:data4_L});this.setState({chart_data4_R:data4_R});this.setState({chart_ready:true});}},{key:\"switch_button\",value:function switch_button(){if(this.state.button_mode===true){this.setState({button_mode:false});this.compose_chart();}else{this.setState({button_mode:true});}}},{key:\"increment_tap1\",value:function increment_tap1(){if(this.state.last_pressed!==1){var current_moment=(Date.now()-this.state.startAt)/1000;this.setState({last_pressed:1});this.setState({dist_array:[].concat(_toConsumableArray(this.state.dist_array),[1.0])});this.setState({dist_time_array:[].concat(_toConsumableArray(this.state.dist_time_array),[current_moment])});this.setState({tap_count:[].concat(_toConsumableArray(this.state.tap_count),[current_moment])});}}},{key:\"increment_tap2\",value:function increment_tap2(){if(this.state.last_pressed!==2){var current_moment=(Date.now()-this.state.startAt)/1000;this.setState({last_pressed:2});this.setState({dist_array:[].concat(_toConsumableArray(this.state.dist_array),[1.0])});this.setState({dist_time_array:[].concat(_toConsumableArray(this.state.dist_time_array),[current_moment])});this.setState({tap_count:[].concat(_toConsumableArray(this.state.tap_count),[current_moment])});}}},{key:\"norm\",value:function norm(lm1,lm2){return sqrt(pow(lm1[0]-lm2[0],2)+pow(lm1[1]-lm2[1],2));}},{key:\"reset_counter\",value:function reset_counter(){clearInterval(this.state.ID);var ctx=this.canvasRef.current.getContext(\"2d\");ctx.clearRect(0,0,this.canvasRef.current.width,this.canvasRef.current.height);this.setState({ID:0,tap_count:[],rotate_count:[],fist_count:[],last_hand_L:[],last_hand_R:[],index_passed:0,min_dist:0,max_dist:99.0,rotate_passed:0,last_pressed:0,real_time_inferencing:false,recording:false,button_mode:false,chart_ready:false,finger_done:false,rotate_done:false,fist_done:false,hand_dist_array_L:[],hand_dist_array_R:[],hand_rotate_array_L:[],hand_rotate_array_R:[],hand_fist_array_L:[],hand_fist_array_R:[],hand_still_array_L:[],hand_still_array_R:[],dist_array_L:[],dist_time_array_L:[],dist_record_L:[],dist_time_record_L:[],dist_array_R:[],dist_time_array_R:[],dist_record_R:[],dist_time_record_R:[],rotate_array_L:[],rotate_time_array_L:[],rotate_record_L:[],rotate_time_record_L:[],rotate_array_R:[],rotate_time_array_R:[],rotate_record_R:[],rotate_time_record_R:[],fist_array_L:[],fist_time_array_L:[],fist_record_L:[],fist_time_record_L:[],fist_array_R:[],fist_time_array_R:[],fist_record_R:[],fist_time_record_R:[],still_array_L:[],still_time_array_L:[],still_record_L:[],still_time_record_L:[],still_array_R:[],still_time_array_R:[],still_record_R:[],still_time_record_R:[],chart_data1_L:null,chart_data1_R:null,chart_data2_L:null,chart_data2_R:null,chart_data3_L:null,chart_data3_R:null,chart_data4_L:null,chart_data4_R:null,stage:0,wait:false,wait_till:0,startAt:Date.now(),dead_frame:0,raw:true,facingMode:\"user\",avg_fps:0});}},{key:\"runHandpose\",value:function(){var _runHandpose=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var _this4=this;var ctx,net,Interval_ID;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:ctx=this.canvasRef.current.getContext(\"2d\");writeText(ctx,{text:'Loading',x:180,y:70});require('@tensorflow/tfjs-backend-webgl');_context6.next=5;return handpose.load();case 5:net=_context6.sent;ctx.clearRect(0,0,this.canvasRef.current.width,this.canvasRef.current.height);//const uploadJSONInput = document.getElementById('upload-json');\n//const uploadWeightsInput = document.getElementById('upload-weights');\n//const model = await tf.loadLayersModel(tf.io.browserFiles([uploadJSONInput.files[0], uploadWeightsInput.files[0]]));\nconsole.log(\"Handpose model loaded.\");this.setState({startAt:Date.now()});Interval_ID=setInterval(function(){_this4.real_time_inference(net);},this.capture_interval);this.setState({ID:Interval_ID,real_time_inferencing:true,wait:true,stage:this.state.stage+1});case 11:case\"end\":return _context6.stop();}}},_callee6,this);}));function runHandpose(){return _runHandpose.apply(this,arguments);}return runHandpose;}()},{key:\"real_time_inference\",value:function(){var _real_time_inference=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(net){var _this5=this;var video,videoWidth,videoHeight,hand,ctx;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(this.state.wait){this.setState({wait_till:Date.now()+3000});this.setState({wait:false});}if(!(typeof this.webcamRef.current!==\"undefined\"&&this.webcamRef.current!==null&&this.webcamRef.current.video.readyState===4)){_context7.next=39;break;}video=this.webcamRef.current.video;videoWidth=this.webcamRef.current.video.videoWidth;videoHeight=this.webcamRef.current.video.videoHeight;this.webcamRef.current.video.width=videoWidth;this.webcamRef.current.video.height=videoHeight;this.canvasRef.current.width=videoWidth;this.canvasRef.current.height=videoHeight;_context7.next=11;return net.estimateHands(video);case 11:hand=_context7.sent;ctx=this.canvasRef.current.getContext(\"2d\");//check if waiting\nif(!(Date.now()<this.state.wait_till)){_context7.next=18;break;}if(hand.length>0)drawHand_tap(hand,ctx);//count down 3, 2, 1\nif(this.state.wait_till-Date.now()<1000)writeText(ctx,{text:'1',x:180,y:70});else if(this.state.wait_till-Date.now()<2000)writeText(ctx,{text:'2',x:140,y:70});else if(this.state.wait_till-Date.now()<3000)writeText(ctx,{text:'3',x:100,y:70});_context7.next=39;break;case 18:_context7.t0=this.state.stage;_context7.next=_context7.t0===1?21:_context7.t0===2?23:_context7.t0===3?25:_context7.t0===4?27:_context7.t0===5?29:_context7.t0===6?31:_context7.t0===7?33:_context7.t0===8?35:37;break;case 21:this.setState({hand_dist_array_L:[].concat(_toConsumableArray(this.state.hand_dist_array_L),[hand])});return _context7.abrupt(\"break\",38);case 23:this.setState({hand_dist_array_R:[].concat(_toConsumableArray(this.state.hand_dist_array_R),[hand])});return _context7.abrupt(\"break\",38);case 25:this.setState({hand_rotate_array_L:[].concat(_toConsumableArray(this.state.hand_rotate_array_L),[hand])});return _context7.abrupt(\"break\",38);case 27:this.setState({hand_rotate_array_R:[].concat(_toConsumableArray(this.state.hand_rotate_array_R),[hand])});return _context7.abrupt(\"break\",38);case 29:this.setState({hand_fist_array_L:[].concat(_toConsumableArray(this.state.hand_fist_array_L),[hand])});return _context7.abrupt(\"break\",38);case 31:this.setState({hand_fist_array_R:[].concat(_toConsumableArray(this.state.hand_fist_array_R),[hand])});return _context7.abrupt(\"break\",38);case 33:this.setState({hand_still_array_L:[].concat(_toConsumableArray(this.state.hand_still_array_L),[hand])});return _context7.abrupt(\"break\",38);case 35:this.setState({hand_still_array_R:[].concat(_toConsumableArray(this.state.hand_still_array_R),[hand])});return _context7.abrupt(\"break\",38);case 37:return _context7.abrupt(\"break\",38);case 38:if(hand.length>0){hand.forEach(function(prediction){_this5.setState({dead_frame:0});var landmarks=prediction.landmarks;var pawn_dist=_this5.norm(landmarks[0],landmarks[2]);var y_dist=_this5.norm(landmarks[0],landmarks[12]);var current_moment=(Date.now()-_this5.state.startAt)/1000;var index_dist=null;var current_dist=null;var rotate_dist=null;var fist_dist=null;var max_move=null;var pinky_rest=null;var ring_rest=null;var middle_rest=null;var index_rest=null;var thumb_rest=null;switch(_this5.state.stage){case 1:drawHand_tap(hand,ctx);index_dist=_this5.norm(landmarks[4],landmarks[8]);current_dist=index_dist/pawn_dist;_this5.setState({dist_array_L:[].concat(_toConsumableArray(_this5.state.dist_array_L),[current_dist]),dist_time_array_L:[].concat(_toConsumableArray(_this5.state.dist_time_array_L),[current_moment])});if(_this5.state.index_passed===0&&current_dist-_this5.state.min_dist>0.2){_this5.setState({index_passed:1,max_dist:current_dist});}if(_this5.state.index_passed===1&&current_dist>_this5.state.max_dist){_this5.setState({max_dist:current_dist});}if(_this5.state.index_passed===1&&_this5.state.max_dist-current_dist>0.2){_this5.setState({index_passed:0,min_dist:current_dist,tap_count:[].concat(_toConsumableArray(_this5.state.tap_count),[current_moment])});}if(_this5.state.index_passed===0&&current_dist<_this5.state.min_dist){_this5.setState({min_dist:current_dist});}break;case 2:drawHand_tap(hand,ctx);index_dist=_this5.norm(landmarks[4],landmarks[8]);current_dist=index_dist/pawn_dist;_this5.setState({dist_array_R:[].concat(_toConsumableArray(_this5.state.dist_array_R),[current_dist]),dist_time_array_R:[].concat(_toConsumableArray(_this5.state.dist_time_array_R),[current_moment])});if(_this5.state.index_passed===0&&current_dist-_this5.state.min_dist>0.2){_this5.setState({index_passed:1,max_dist:current_dist});}if(_this5.state.index_passed===1&&current_dist>_this5.state.max_dist){_this5.setState({max_dist:current_dist});}if(_this5.state.index_passed===1&&_this5.state.max_dist-current_dist>0.2){_this5.setState({index_passed:0,min_dist:current_dist,tap_count:[].concat(_toConsumableArray(_this5.state.tap_count),[current_moment])});}if(_this5.state.index_passed===0&&current_dist<_this5.state.min_dist){_this5.setState({min_dist:current_dist});}break;case 3:drawHand_rotate(hand,ctx,_this5.state.rotate_passed);rotate_dist=(landmarks[2][0]-landmarks[17][0])/y_dist;_this5.setState({rotate_array_L:[].concat(_toConsumableArray(_this5.state.rotate_array_L),[rotate_dist]),rotate_time_array_L:[].concat(_toConsumableArray(_this5.state.rotate_time_array_L),[current_moment])});if(_this5.state.rotate_passed===0){if(rotate_dist>=0.2)_this5.setState({rotate_passed:1});if(rotate_dist<=-0.2)_this5.setState({rotate_passed:-1});}if(_this5.state.rotate_passed===1&&rotate_dist<=-0.2){_this5.setState({rotate_passed:-1});}if(_this5.state.rotate_passed===-1&&rotate_dist>=0.2){_this5.setState({rotate_passed:1,rotate_count:[].concat(_toConsumableArray(_this5.state.rotate_count),[current_moment])});}break;case 4:drawHand_rotate(hand,ctx,_this5.state.rotate_passed);rotate_dist=(landmarks[2][0]-landmarks[17][0])/y_dist;_this5.setState({rotate_array_R:[].concat(_toConsumableArray(_this5.state.rotate_array_R),[rotate_dist]),rotate_time_array_R:[].concat(_toConsumableArray(_this5.state.rotate_time_array_R),[current_moment])});if(_this5.state.rotate_passed===0){if(rotate_dist>=0.2)_this5.setState({rotate_passed:1});if(rotate_dist<=-0.2)_this5.setState({rotate_passed:-1});}if(_this5.state.rotate_passed===1&&rotate_dist<=-0.2){_this5.setState({rotate_passed:-1});}if(_this5.state.rotate_passed===-1&&rotate_dist>=0.2){_this5.setState({rotate_passed:1,rotate_count:[].concat(_toConsumableArray(_this5.state.rotate_count),[current_moment])});}break;case 5:drawHand_fist(hand,ctx,_this5.state.fist_passed);fist_dist=(landmarks[8][1]-landmarks[5][1]+(landmarks[12][1]-landmarks[9][1])+(landmarks[16][1]-landmarks[13][1])+(landmarks[20][1]-landmarks[17][1]))/(4*pawn_dist);_this5.setState({fist_array_L:[].concat(_toConsumableArray(_this5.state.fist_array_L),[fist_dist]),fist_time_array_L:[].concat(_toConsumableArray(_this5.state.fist_time_array_L),[current_moment])});if(fist_dist>=0.0){_this5.setState({fist_passed:1});}if(fist_dist<-0.4&&_this5.state.fist_passed===1){_this5.setState({fist_passed:0,fist_count:[].concat(_toConsumableArray(_this5.state.fist_count),[current_moment])});}break;case 6:drawHand_fist(hand,ctx,_this5.state.fist_passed);fist_dist=(landmarks[8][1]-landmarks[5][1]+(landmarks[12][1]-landmarks[9][1])+(landmarks[16][1]-landmarks[13][1])+(landmarks[20][1]-landmarks[17][1]))/(4*pawn_dist);_this5.setState({fist_array_R:[].concat(_toConsumableArray(_this5.state.fist_array_R),[fist_dist]),fist_time_array_R:[].concat(_toConsumableArray(_this5.state.fist_time_array_R),[current_moment])});if(fist_dist>=0.0){_this5.setState({fist_passed:1});}if(fist_dist<-0.4&&_this5.state.fist_passed===1){_this5.setState({fist_passed:0,fist_count:[].concat(_toConsumableArray(_this5.state.fist_count),[current_moment])});}break;case 7:max_move=0.0;if(_this5.state.last_hand_L.length>0){var moved=[];pinky_rest=Math.abs(_this5.norm(landmarks[0],landmarks[4])-_this5.norm(_this5.state.last_hand_L[0],_this5.state.last_hand_L[4]))/pawn_dist;ring_rest=Math.abs(_this5.norm(landmarks[0],landmarks[8])-_this5.norm(_this5.state.last_hand_L[0],_this5.state.last_hand_L[8]))/pawn_dist;middle_rest=Math.abs(_this5.norm(landmarks[0],landmarks[12])-_this5.norm(_this5.state.last_hand_L[0],_this5.state.last_hand_L[12]))/pawn_dist;index_rest=Math.abs(_this5.norm(landmarks[0],landmarks[16])-_this5.norm(_this5.state.last_hand_L[0],_this5.state.last_hand_L[16]))/pawn_dist;thumb_rest=Math.abs(_this5.norm(landmarks[0],landmarks[20])-_this5.norm(_this5.state.last_hand_L[0],_this5.state.last_hand_L[20]))/pawn_dist;if(pinky_rest>0.2)moved=[].concat(_toConsumableArray(moved),[4]);if(ring_rest>0.2)moved=[].concat(_toConsumableArray(moved),[8]);if(middle_rest>0.2)moved=[].concat(_toConsumableArray(moved),[12]);if(index_rest>0.2)moved=[].concat(_toConsumableArray(moved),[16]);if(thumb_rest>0.2)moved=[].concat(_toConsumableArray(moved),[20]);max_move=Math.max(pinky_rest,ring_rest,middle_rest,index_rest,thumb_rest);if(max_move>_this5.state.max_tremor_L)_this5.setState({max_tremor_L:max_move});drawHand_still(hand,ctx,moved);}else{_this5.setState({last_hand_L:landmarks});}_this5.setState({still_array_L:[].concat(_toConsumableArray(_this5.state.still_array_L),[max_move]),still_time_array_L:[].concat(_toConsumableArray(_this5.state.still_time_array_L),[current_moment])});break;case 8:max_move=0.0;if(_this5.state.last_hand_R.length>0){var _moved=[];pinky_rest=Math.abs(_this5.norm(landmarks[0],landmarks[4])-_this5.norm(_this5.state.last_hand_R[0],_this5.state.last_hand_R[4]))/pawn_dist;ring_rest=Math.abs(_this5.norm(landmarks[0],landmarks[8])-_this5.norm(_this5.state.last_hand_R[0],_this5.state.last_hand_R[8]))/pawn_dist;middle_rest=Math.abs(_this5.norm(landmarks[0],landmarks[12])-_this5.norm(_this5.state.last_hand_R[0],_this5.state.last_hand_R[12]))/pawn_dist;index_rest=Math.abs(_this5.norm(landmarks[0],landmarks[16])-_this5.norm(_this5.state.last_hand_R[0],_this5.state.last_hand_R[16]))/pawn_dist;thumb_rest=Math.abs(_this5.norm(landmarks[0],landmarks[20])-_this5.norm(_this5.state.last_hand_R[0],_this5.state.last_hand_R[20]))/pawn_dist;if(pinky_rest>0.2)_moved=[].concat(_toConsumableArray(_moved),[4]);if(ring_rest>0.2)_moved=[].concat(_toConsumableArray(_moved),[8]);if(middle_rest>0.2)_moved=[].concat(_toConsumableArray(_moved),[12]);if(index_rest>0.2)_moved=[].concat(_toConsumableArray(_moved),[16]);if(thumb_rest>0.2)_moved=[].concat(_toConsumableArray(_moved),[20]);max_move=Math.max(pinky_rest,ring_rest,middle_rest,index_rest,thumb_rest);if(max_move>_this5.state.max_tremor_R)_this5.setState({max_tremor_R:max_move});drawHand_still(hand,ctx,_moved);}else{_this5.setState({last_hand_R:landmarks});}_this5.setState({still_array_R:[].concat(_toConsumableArray(_this5.state.still_array_R),[max_move]),still_time_array_R:[].concat(_toConsumableArray(_this5.state.still_time_array_R),[current_moment])});break;default:console.log(\"Should Not Print\");break;}});}else{// Warning message for hand off screen\nif(this.state.dead_frame>9)writeText(ctx,{text:'Hand Off Screen',x:180,y:70});this.setState({dead_frame:this.state.dead_frame+1});}case 39:case\"end\":return _context7.stop();}}},_callee7,this);}));function real_time_inference(_x3){return _real_time_inference.apply(this,arguments);}return real_time_inference;}()},{key:\"next_step\",value:function(){var _next_step=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var ctx;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(!(this.state.stage!==8)){_context8.next=4;break;}this.setState({stage:this.state.stage+1,wait:true});_context8.next=12;break;case 4:clearInterval(this.state.ID);if(!(this.state.recording===true)){_context8.next=8;break;}_context8.next=8;return this.inference();case 8:this.setState({real_time_inferencing:false,recording:false,stage:0});this.compose_chart();ctx=this.canvasRef.current.getContext(\"2d\");ctx.clearRect(0,0,this.canvasRef.current.width,this.canvasRef.current.height);case 12:case\"end\":return _context8.stop();}}},_callee8,this);}));function next_step(){return _next_step.apply(this,arguments);}return next_step;}()},{key:\"stop_tapping\",value:function(){var _stop_tapping=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:this.setState({finger_done:true});this.setState({wait:true});case 2:case\"end\":return _context9.stop();}}},_callee9,this);}));function stop_tapping(){return _stop_tapping.apply(this,arguments);}return stop_tapping;}()},{key:\"stop_rotating\",value:function(){var _stop_rotating=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:this.setState({rotate_done:true});this.setState({wait:true});case 2:case\"end\":return _context10.stop();}}},_callee10,this);}));function stop_rotating(){return _stop_rotating.apply(this,arguments);}return stop_rotating;}()},{key:\"stop_gripping\",value:function(){var _stop_gripping=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:this.setState({fist_done:true});this.setState({wait:true});case 2:case\"end\":return _context11.stop();}}},_callee11,this);}));function stop_gripping(){return _stop_gripping.apply(this,arguments);}return stop_gripping;}()},{key:\"stop_real_time_inference\",value:function stop_real_time_inference(){clearInterval(this.state.ID);this.setState({real_time_inferencing:false,finger_done:false,rotate_done:false,fist_done:false});this.compose_chart();var ctx=this.canvasRef.current.getContext(\"2d\");ctx.clearRect(0,0,this.canvasRef.current.width,this.canvasRef.current.height);}},{key:\"record_video\",value:function(){var _record_video=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){var _this6=this;var Interval_ID;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:this.setState({startAt:Date.now()});console.log(\"Handpose model loaded.\");Interval_ID=setInterval(function(){_this6.concat_frame();},this.capture_interval);this.setState({ID:Interval_ID,recording:true,wait:true,stage:this.state.stage+1});case 4:case\"end\":return _context12.stop();}}},_callee12,this);}));function record_video(){return _record_video.apply(this,arguments);}return record_video;}()},{key:\"concat_frame\",value:function(){var _concat_frame=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(){var ctx,current_moment,image,img;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:if(this.state.wait){this.setState({wait_till:Date.now()+3000,wait:false});}if(typeof this.webcamRef.current!==\"undefined\"&&this.webcamRef.current!==null&&this.webcamRef.current.video.readyState===4){if(Date.now()<this.state.wait_till){//console.log(\"Waiting till \", this.state.wait_till);\n//count down 3, 2, 1\nctx=this.canvasRef.current.getContext(\"2d\");if(this.state.wait_till-Date.now()<250)ctx.clearRect(0,0,this.canvasRef.current.width,this.canvasRef.current.height);else if(this.state.wait_till-Date.now()<1000)writeText(ctx,{text:'1',x:180,y:70});else if(this.state.wait_till-Date.now()<2000)writeText(ctx,{text:'2',x:140,y:70});else if(this.state.wait_till-Date.now()<3000)writeText(ctx,{text:'3',x:100,y:70});}else{current_moment=(Date.now()-this.state.startAt)/1000;image=this.webcamRef.current.getScreenshot();img=document.createElement(\"img\");img.src=image;img.onload=function(){switch(this.state.stage){case 1:this.setState({dist_record_L:[].concat(_toConsumableArray(this.state.dist_record_L),[img]),dist_time_record_L:[].concat(_toConsumableArray(this.state.dist_time_record_L),[current_moment])});break;case 2:this.setState({dist_record_R:[].concat(_toConsumableArray(this.state.dist_record_R),[img]),dist_time_record_R:[].concat(_toConsumableArray(this.state.dist_time_record_R),[current_moment])});break;case 3:this.setState({rotate_record_L:[].concat(_toConsumableArray(this.state.rotate_record_L),[img]),rotate_time_record_L:[].concat(_toConsumableArray(this.state.rotate_time_record_L),[current_moment])});break;case 4:this.setState({rotate_record_R:[].concat(_toConsumableArray(this.state.rotate_record_R),[img]),rotate_time_record_R:[].concat(_toConsumableArray(this.state.rotate_time_record_R),[current_moment])});break;case 5:this.setState({fist_record_L:[].concat(_toConsumableArray(this.state.fist_record_L),[img]),fist_time_record_L:[].concat(_toConsumableArray(this.state.fist_time_record_L),[current_moment])});break;case 6:this.setState({fist_record_R:[].concat(_toConsumableArray(this.state.fist_record_R),[img]),fist_time_record_R:[].concat(_toConsumableArray(this.state.fist_time_record_R),[current_moment])});break;case 7:this.setState({still_record_L:[].concat(_toConsumableArray(this.state.still_record_L),[img]),still_time_record_L:[].concat(_toConsumableArray(this.state.still_time_record_L),[current_moment])});break;case 8:this.setState({still_record_R:[].concat(_toConsumableArray(this.state.still_record_R),[img]),still_time_record_R:[].concat(_toConsumableArray(this.state.still_time_record_R),[current_moment])});break;default:console.log('Should print this');break;}}.bind(this);}}case 2:case\"end\":return _context13.stop();}}},_callee13,this);}));function concat_frame(){return _concat_frame.apply(this,arguments);}return concat_frame;}()},{key:\"inference\",value:function(){var _inference=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(){var _this7=this;var net,i,hand,_i,_hand,_i2,_hand2,_i3,_hand3,_i4,_hand4,_i5,_hand5,_i6,_hand6,_i7,_hand7;return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:require('@tensorflow/tfjs-backend-webgl');_context14.next=3;return handpose.load();case 3:net=_context14.sent;console.log(\"Handpose model loaded.\");// Run prediction on recorded tapping data\ni=0;case 6:if(!(i<this.state.dist_record_L.length)){_context14.next=14;break;}_context14.next=9;return net.estimateHands(this.state.dist_record_L[i]);case 9:hand=_context14.sent;if(hand.length>0){hand.forEach(function(prediction){// Calculate relative distance\nvar landmarks=prediction.landmarks;var current_moment=(Date.now()-_this7.state.startAt)/1000;var index_dist=_this7.norm(landmarks[4],landmarks[8]);var pawn_dist=_this7.norm(landmarks[0],landmarks[2]);var current_dist=index_dist/pawn_dist;_this7.setState({dist_array_L:[].concat(_toConsumableArray(_this7.state.dist_array_L),[current_dist]),dist_time_array_L:[].concat(_toConsumableArray(_this7.state.dist_time_array_L),[current_moment])});if(_this7.state.index_passed===0&&current_dist-_this7.state.min_dist>0.2){_this7.setState({index_passed:1,max_dist:current_dist});}if(_this7.state.index_passed===1&&current_dist>_this7.state.max_dist){_this7.setState({max_dist:current_dist});}if(_this7.state.index_passed===1&&_this7.state.max_dist-current_dist>0.2){_this7.setState({index_passed:0,min_dist:current_dist,tap_count:[].concat(_toConsumableArray(_this7.state.tap_count),[current_moment])});}if(_this7.state.index_passed===0&&current_dist<_this7.state.min_dist){_this7.setState({min_dist:current_dist});}console.log(\"INDEX COUNT:\",_this7.state.tap_count);});}case 11:i++;_context14.next=6;break;case 14:_i=0;case 15:if(!(_i<this.state.dist_record_R.length)){_context14.next=23;break;}_context14.next=18;return net.estimateHands(this.state.dist_record_R[_i]);case 18:_hand=_context14.sent;if(_hand.length>0){_hand.forEach(function(prediction){// Calculate relative distance\nvar landmarks=prediction.landmarks;var current_moment=(Date.now()-_this7.state.startAt)/1000;var index_dist=_this7.norm(landmarks[4],landmarks[8]);var pawn_dist=_this7.norm(landmarks[0],landmarks[2]);var current_dist=index_dist/pawn_dist;_this7.setState({dist_array_R:[].concat(_toConsumableArray(_this7.state.dist_array_R),[current_dist]),dist_time_array_R:[].concat(_toConsumableArray(_this7.state.dist_time_array_R),[current_moment])});if(_this7.state.index_passed===0&&current_dist-_this7.state.min_dist>0.2){_this7.setState({index_passed:1,max_dist:current_dist});}if(_this7.state.index_passed===1&&current_dist>_this7.state.max_dist){_this7.setState({max_dist:current_dist});}if(_this7.state.index_passed===1&&_this7.state.max_dist-current_dist>0.2){_this7.setState({index_passed:0,min_dist:current_dist,tap_count:[].concat(_toConsumableArray(_this7.state.tap_count),[current_moment])});}if(_this7.state.index_passed===0&&current_dist<_this7.state.min_dist){_this7.setState({min_dist:current_dist});}console.log(\"INDEX COUNT:\",_this7.state.tap_count);});}case 20:_i++;_context14.next=15;break;case 23:_i2=0;case 24:if(!(_i2<this.state.rotate_record_L.length)){_context14.next=32;break;}_context14.next=27;return net.estimateHands(this.state.rotate_record_L[_i2]);case 27:_hand2=_context14.sent;if(_hand2.length>0){_hand2.forEach(function(prediction){var landmarks=prediction.landmarks;var current_moment=(Date.now()-_this7.state.startAt)/1000;var pawn_dist=_this7.norm(landmarks[0],landmarks[12]);var rotate_dist=(landmarks[2][0]-landmarks[17][0])/pawn_dist;_this7.setState({rotate_array_L:[].concat(_toConsumableArray(_this7.state.rotate_array_L),[rotate_dist]),rotate_time_array_L:[].concat(_toConsumableArray(_this7.state.rotate_time_array_L),[current_moment])});if(_this7.state.rotate_passed===0){if(rotate_dist>=0.2)_this7.setState({rotate_passed:1});if(rotate_dist<=-0.2)_this7.setState({rotate_passed:-1});}if(_this7.state.rotate_passed===1&&rotate_dist<=-0.2){_this7.setState({rotate_passed:-1});}if(_this7.state.rotate_passed===-1&&rotate_dist>=0.2){_this7.setState({rotate_passed:1,rotate_count:[].concat(_toConsumableArray(_this7.state.rotate_count),[current_moment])});}console.log(\"ROTATE COUNT:\",_this7.state.rotate_count);});}case 29:_i2++;_context14.next=24;break;case 32:_i3=0;case 33:if(!(_i3<this.state.rotate_record_R.length)){_context14.next=41;break;}_context14.next=36;return net.estimateHands(this.state.rotate_record_R[_i3]);case 36:_hand3=_context14.sent;if(_hand3.length>0){_hand3.forEach(function(prediction){var landmarks=prediction.landmarks;var current_moment=(Date.now()-_this7.state.startAt)/1000;var pawn_dist=_this7.norm(landmarks[0],landmarks[12]);var rotate_dist=(landmarks[2][0]-landmarks[17][0])/pawn_dist;_this7.setState({rotate_array_R:[].concat(_toConsumableArray(_this7.state.rotate_array_R),[rotate_dist]),rotate_time_array_R:[].concat(_toConsumableArray(_this7.state.rotate_time_array_R),[current_moment])});if(_this7.state.rotate_passed===0){if(rotate_dist>=0.2)_this7.setState({rotate_passed:1});if(rotate_dist<=-0.2)_this7.setState({rotate_passed:-1});}if(_this7.state.rotate_passed===1&&rotate_dist<=-0.2){_this7.setState({rotate_passed:-1});}if(_this7.state.rotate_passed===-1&&rotate_dist>=0.2){_this7.setState({rotate_passed:1,rotate_count:[].concat(_toConsumableArray(_this7.state.rotate_count),[current_moment])});}console.log(\"ROTATE COUNT:\",_this7.state.rotate_count);});}case 38:_i3++;_context14.next=33;break;case 41:_i4=0;case 42:if(!(_i4<this.state.fist_record_L.length)){_context14.next=50;break;}_context14.next=45;return net.estimateHands(this.state.fist_record_L[_i4]);case 45:_hand4=_context14.sent;if(_hand4.length>0){_hand4.forEach(function(prediction){var landmarks=prediction.landmarks;var current_moment=(Date.now()-_this7.state.startAt)/1000;var pawn_dist=_this7.norm(landmarks[0],landmarks[2]);var fist_dist=(landmarks[8][1]-landmarks[5][1]+(landmarks[12][1]-landmarks[9][1])+(landmarks[16][1]-landmarks[13][1])+(landmarks[20][1]-landmarks[17][1]))/(4*pawn_dist);_this7.setState({fist_array_L:[].concat(_toConsumableArray(_this7.state.fist_array_L),[fist_dist]),fist_time_array_L:[].concat(_toConsumableArray(_this7.state.fist_time_array_L),[current_moment])});if(fist_dist>=0.0){_this7.setState({fist_passed:1});}if(fist_dist<-0.4&&_this7.state.fist_passed===1){_this7.setState({fist_passed:0,fist_count:[].concat(_toConsumableArray(_this7.state.fist_count),[current_moment])});}console.log(\"FIST COUNT:\",_this7.state.fist_count);});}case 47:_i4++;_context14.next=42;break;case 50:_i5=0;case 51:if(!(_i5<this.state.fist_record_R.length)){_context14.next=59;break;}_context14.next=54;return net.estimateHands(this.state.fist_record_R[_i5]);case 54:_hand5=_context14.sent;if(_hand5.length>0){_hand5.forEach(function(prediction){var landmarks=prediction.landmarks;var current_moment=(Date.now()-_this7.state.startAt)/1000;var pawn_dist=_this7.norm(landmarks[0],landmarks[2]);var fist_dist=(landmarks[8][1]-landmarks[5][1]+(landmarks[12][1]-landmarks[9][1])+(landmarks[16][1]-landmarks[13][1])+(landmarks[20][1]-landmarks[17][1]))/(4*pawn_dist);_this7.setState({fist_array_R:[].concat(_toConsumableArray(_this7.state.fist_array_R),[fist_dist]),fist_time_array_R:[].concat(_toConsumableArray(_this7.state.fist_time_array_R),[current_moment])});if(fist_dist>=0.0){_this7.setState({fist_passed:1});}if(fist_dist<-0.4&&_this7.state.fist_passed===1){_this7.setState({fist_passed:0,fist_count:[].concat(_toConsumableArray(_this7.state.fist_count),[current_moment])});}console.log(\"FIST COUNT:\",_this7.state.fist_count);});}case 56:_i5++;_context14.next=51;break;case 59:_i6=0;case 60:if(!(_i6<this.state.still_record_L.length)){_context14.next=68;break;}_context14.next=63;return net.estimateHands(this.state.still_record_L[_i6]);case 63:_hand6=_context14.sent;if(_hand6.length>0){_hand6.forEach(function(prediction){var landmarks=prediction.landmarks;var current_moment=(Date.now()-_this7.state.startAt)/1000;var max_move=0.0;var pawn_dist=_this7.norm(landmarks[0],landmarks[2]);if(_this7.state.last_hand_L.length>0){var pinky_rest=Math.abs(_this7.norm(landmarks[0],landmarks[4])-_this7.norm(_this7.state.last_hand_L[0],_this7.state.last_hand_L[4]))/pawn_dist;var ring_rest=Math.abs(_this7.norm(landmarks[0],landmarks[8])-_this7.norm(_this7.state.last_hand_L[0],_this7.state.last_hand_L[8]))/pawn_dist;var middle_rest=Math.abs(_this7.norm(landmarks[0],landmarks[12])-_this7.norm(_this7.state.last_hand_L[0],_this7.state.last_hand_L[12]))/pawn_dist;var index_rest=Math.abs(_this7.norm(landmarks[0],landmarks[16])-_this7.norm(_this7.state.last_hand_L[0],_this7.state.last_hand_L[16]))/pawn_dist;var thumb_rest=Math.abs(_this7.norm(landmarks[0],landmarks[20])-_this7.norm(_this7.state.last_hand_L[0],_this7.state.last_hand_L[20]))/pawn_dist;max_move=Math.max(pinky_rest,ring_rest,middle_rest,index_rest,thumb_rest);if(max_move>_this7.state.max_tremor_L)_this7.setState({max_tremor_L:max_move});}else{_this7.setState({last_hand_L:landmarks});}_this7.setState({still_array_L:[].concat(_toConsumableArray(_this7.state.still_array_L),[max_move]),still_time_array_L:[].concat(_toConsumableArray(_this7.state.still_time_array_L),[current_moment])});});}case 65:_i6++;_context14.next=60;break;case 68:_i7=0;case 69:if(!(_i7<this.state.still_record_R.length)){_context14.next=77;break;}_context14.next=72;return net.estimateHands(this.state.still_record_R[_i7]);case 72:_hand7=_context14.sent;if(_hand7.length>0){_hand7.forEach(function(prediction){var landmarks=prediction.landmarks;var current_moment=(Date.now()-_this7.state.startAt)/1000;var max_move=0.0;var pawn_dist=_this7.norm(landmarks[0],landmarks[2]);if(_this7.state.last_hand_R.length>0){var pinky_rest=Math.abs(_this7.norm(landmarks[0],landmarks[4])-_this7.norm(_this7.state.last_hand_L[0],_this7.state.last_hand_L[4]))/pawn_dist;var ring_rest=Math.abs(_this7.norm(landmarks[0],landmarks[8])-_this7.norm(_this7.state.last_hand_L[0],_this7.state.last_hand_L[8]))/pawn_dist;var middle_rest=Math.abs(_this7.norm(landmarks[0],landmarks[12])-_this7.norm(_this7.state.last_hand_L[0],_this7.state.last_hand_L[12]))/pawn_dist;var index_rest=Math.abs(_this7.norm(landmarks[0],landmarks[16])-_this7.norm(_this7.state.last_hand_L[0],_this7.state.last_hand_L[16]))/pawn_dist;var thumb_rest=Math.abs(_this7.norm(landmarks[0],landmarks[20])-_this7.norm(_this7.state.last_hand_L[0],_this7.state.last_hand_L[20]))/pawn_dist;max_move=Math.max(pinky_rest,ring_rest,middle_rest,index_rest,thumb_rest);if(max_move>_this7.state.max_tremor_R)_this7.setState({max_tremor_R:max_move});}else{_this7.setState({last_hand_R:landmarks});}_this7.setState({still_array_R:[].concat(_toConsumableArray(_this7.state.still_array_R),[max_move]),still_time_array_R:[].concat(_toConsumableArray(_this7.state.still_time_array_R),[current_moment])});});}case 74:_i7++;_context14.next=69;break;case 77:this.setState({record:[]});case 78:case\"end\":return _context14.stop();}}},_callee14,this);}));function inference(){return _inference.apply(this,arguments);}return inference;}()},{key:\"stop_record\",value:function(){var _stop_record=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(){return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:clearInterval(this.state.ID);_context15.next=3;return this.inference();case 3:this.setState({recording:false,finger_done:false,rotate_done:false,fist_done:false});this.compose_chart();case 5:case\"end\":return _context15.stop();}}},_callee15,this);}));function stop_record(){return _stop_record.apply(this,arguments);}return stop_record;}()},{key:\"render\",value:function render(){var videoConstraints={facingMode:this.state.facingMode};var button_1=null;var button_2=null;switch(this.state.stage){case 1:button_1=/*#__PURE__*/_jsx(Button,{disabled:this.state.recording,variant:\"contained\",color:\"primary\",onClick:this.next_step,children:\"Finish Finger Tapping Left (Real Time)\"});button_2=/*#__PURE__*/_jsx(Button,{disabled:this.state.real_time_inferencing,variant:\"contained\",color:\"secondary\",onClick:this.next_step,children:\"Finish Finger Tapping Left (Record)\"});break;case 2:button_1=/*#__PURE__*/_jsx(Button,{disabled:this.state.recording,variant:\"contained\",color:\"primary\",onClick:this.next_step,children:\"Finish Finger Tapping Right (Real Time)\"});button_2=/*#__PURE__*/_jsx(Button,{disabled:this.state.real_time_inferencing,variant:\"contained\",color:\"secondary\",onClick:this.next_step,children:\"Finish Finger Tapping Right (Record)\"});break;case 3:button_1=/*#__PURE__*/_jsx(Button,{disabled:this.state.recording,variant:\"contained\",color:\"primary\",onClick:this.next_step,children:\"Finish Rotation Left (Real Time)\"});button_2=/*#__PURE__*/_jsx(Button,{disabled:this.state.real_time_inferencing,variant:\"contained\",color:\"secondary\",onClick:this.next_step,children:\"Finish Rotation Left (Record)\"});break;case 4:button_1=/*#__PURE__*/_jsx(Button,{disabled:this.state.recording,variant:\"contained\",color:\"primary\",onClick:this.next_step,children:\"Finish Rotation Right (Real Time)\"});button_2=/*#__PURE__*/_jsx(Button,{disabled:this.state.real_time_inferencing,variant:\"contained\",color:\"secondary\",onClick:this.next_step,children:\"Finish Rotation Right (Record)\"});break;case 5:button_1=/*#__PURE__*/_jsx(Button,{disabled:this.state.recording,variant:\"contained\",color:\"primary\",onClick:this.next_step,children:\"Finish Gripping Left (Real Time)\"});button_2=/*#__PURE__*/_jsx(Button,{disabled:this.state.real_time_inferencing,variant:\"contained\",color:\"secondary\",onClick:this.next_step,children:\"Finish Gripping Left (Record)\"});break;case 6:button_1=/*#__PURE__*/_jsx(Button,{disabled:this.state.recording,variant:\"contained\",color:\"primary\",onClick:this.next_step,children:\"Finish Gripping Right (Real Time)\"});button_2=/*#__PURE__*/_jsx(Button,{disabled:this.state.real_time_inferencing,variant:\"contained\",color:\"secondary\",onClick:this.next_step,children:\"Finish Gripping Right (Record)\"});break;case 7:button_1=/*#__PURE__*/_jsx(Button,{disabled:this.state.recording,variant:\"contained\",color:\"primary\",onClick:this.next_step,children:\"Finish Resting Left (Real Time)\"});button_2=/*#__PURE__*/_jsx(Button,{disabled:this.state.real_time_inferencing,variant:\"contained\",color:\"secondary\",onClick:this.next_step,children:\"Finish Resting Left (Record)\"});break;case 8:button_1=/*#__PURE__*/_jsx(Button,{disabled:this.state.recording,variant:\"contained\",color:\"primary\",onClick:this.next_step,children:\"Finish Resting Right (Real Time)\"});button_2=/*#__PURE__*/_jsx(Button,{disabled:this.state.real_time_inferencing,variant:\"contained\",color:\"secondary\",onClick:this.next_step,children:\"Finish Resting Right (Record)\"});break;default:button_1=/*#__PURE__*/_jsx(Button,{disabled:this.state.recording,variant:\"contained\",color:\"primary\",onClick:this.runHandpose,children:\"Start Test (Real Time)\"});button_2=/*#__PURE__*/_jsx(Button,{disabled:this.state.real_time_inferencing,variant:\"contained\",color:\"secondary\",onClick:this.record_video,children:\"Start Test (Record)\"});break;}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(Webcam,{ref:this.webcamRef,videoConstraints:videoConstraints,style:{position:\"absolute\",marginLeft:\"auto\",marginRight:\"auto\",left:0,right:0,textAlign:\"center\",zindex:9,width:\"auto\",height:\"auto\"}}),/*#__PURE__*/_jsx(\"canvas\",{ref:this.canvasRef,style:{position:\"absolute\",marginLeft:\"auto\",marginRight:\"auto\",left:0,right:0,textAlign:\"center\",zindex:9,width:\"auto\",height:\"auto\"}})]}),this.state.button_mode?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:this.increment_tap1,id:\"button1\",children:\"Index Finger\"}),/*#__PURE__*/_jsx(\"button\",{onClick:this.increment_tap2,id:\"button2\",children:\"Middle Finger\"})]}):/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:button_1}),/*#__PURE__*/_jsx(\"div\",{children:button_2}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{disabled:this.state.recording||this.state.real_time_inferencing,variant:\"outlined\",color:\"secondary\",onClick:this.reset_counter,children:\"Reset All\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h5\",{children:[\"Finger Tapping Count:\",this.state.tap_count.length,\"\\xA0\\xA0\\xA0\\xA0 Rotate Count:\",this.state.rotate_count.length,\"\\xA0\\xA0\\xA0\\xA0 Gripping Count: \",this.state.fist_count.length,\"\\xA0\\xA0\\xA0\\xA0 FPS: \",this.state.avg_fps]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:handline,className:\"handline\",alt:\"anything\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"small\",{children:\"Enter Vertical Distance (cm)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"real_measurement_v\",onChange:this.compose_chart,step:\"0.001\",min:\"0\",max:\"20\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"small\",{children:\"Enter Horizontal Distance (cm)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"real_measurement_h\",onChange:this.compose_chart,step:\"0.001\",min:\"0\",max:\"20\"})]}),/*#__PURE__*/_jsx(\"button\",{disabled:!this.state.chart_ready,onClick:this.switch_style,children:\"Switch Chart Style\"}),/*#__PURE__*/_jsx(\"button\",{onClick:this.switch_cam,children:\"Switch Camera\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"small\",{children:\"Experimental Features\"}),/*#__PURE__*/_jsx(\"button\",{disabled:this.state.recording||this.state.real_time_inferencing,onClick:this.runPosenet,children:\"PoseNet\"}),/*#__PURE__*/_jsx(\"button\",{disabled:this.state.recording||this.state.real_time_inferencing,onClick:this.runFacemesh,children:\"Facemesh\"}),/*#__PURE__*/_jsx(\"button\",{disabled:this.state.recording||this.state.real_time_inferencing,onClick:this.switch_button,children:\"Switch On/Off Button\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[this.state.chart_ready?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Line,{data:this.state.chart_data1_L}),/*#__PURE__*/_jsx(Line,{data:this.state.chart_data1_R}),/*#__PURE__*/_jsx(Line,{data:this.state.chart_data2_L}),/*#__PURE__*/_jsx(Line,{data:this.state.chart_data2_R}),/*#__PURE__*/_jsx(Line,{data:this.state.chart_data3_L}),/*#__PURE__*/_jsx(Line,{data:this.state.chart_data3_R}),/*#__PURE__*/_jsx(Line,{data:this.state.chart_data4_L}),/*#__PURE__*/_jsx(Line,{data:this.state.chart_data4_R})]}):/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"small\",{children:\"UPDRS Score, X for N/A, Could be Empty\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"Score\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"small\",{children:\"Patient ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"Patient_ID\"}),/*#__PURE__*/_jsx(\"small\",{children:\"Special Remarks\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"Remarks\"})]}),/*#__PURE__*/_jsxs(\"select\",{name:\"PD\",id:\"PD\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"Control\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"RBD\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"PD(with medication)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"PD(without medication)\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:this.getArray,children:\"Get Array\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"upload-json\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"upload-weights\"})})]})]});}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["C:/Users/wongh/Documents/GitHub/tfjs-app/src/App.js"],"names":["React","Button","handpose","posenet","facemesh","Webcam","drawHand_tap","drawHand_rotate","drawHand_fist","drawHand_still","writeText","drawKeypoints","drawSkeleton","drawMesh","sqrt","pow","Line","handline","App","props","sleep","milliseconds","Promise","resolve","setTimeout","exportToJson","objectData","filename","contentType","window","navigator","msSaveOrOpenBlob","blob","Blob","decodeURIComponent","encodeURI","JSON","stringify","type","a","document","createElement","download","href","encodeURIComponent","target","body","appendChild","click","removeChild","getArray","remark","getElementById","value","ID","Date","toString","dict","dist_array_L","state","dist_time_array_L","rotate_array_L","rotate_time_array_L","fist_array_L","fist_time_array_L","still_array_L","still_time_array_L","hand_dist_array_L","hand_rotate_array_L","hand_fist_array_L","hand_still_array_L","dist_array_R","dist_time_array_R","rotate_array_R","rotate_time_array_R","fist_array_R","fist_time_array_R","still_array_R","still_time_array_R","hand_dist_array_R","hand_rotate_array_R","hand_fist_array_R","hand_still_array_R","PD","Score","PID","console","log","tap_count","rotate_count","fist_count","last_hand_L","last_hand_R","index_passed","min_dist","max_dist","rotate_passed","last_pressed","real_time_inferencing","recording","button_mode","chart_ready","finger_done","rotate_done","fist_done","dist_record_L","dist_time_record_L","dist_record_R","dist_time_record_R","rotate_record_L","rotate_time_record_L","rotate_record_R","rotate_time_record_R","fist_record_L","fist_time_record_L","fist_record_R","fist_time_record_R","still_record_L","still_time_record_L","still_record_R","still_time_record_R","chart_data1_L","chart_data1_R","chart_data2_L","chart_data2_R","chart_data3_L","chart_data3_R","chart_data4_L","chart_data4_R","stage","wait","wait_till","max_tremor_L","max_tremor_R","startAt","now","dead_frame","raw","facingMode","avg_fps","webcamRef","createRef","canvasRef","videoConstraints","capture_interval","runHandpose","bind","stop_real_time_inference","stop_tapping","stop_rotating","stop_gripping","stop_record","record_video","concat_frame","inference","reset_counter","increment_tap1","increment_tap2","switch_button","compose_chart","runPosenet","real_time_posenet","runFacemesh","real_time_facemesh","switch_style","switch_cam","next_step","setState","require","load","net","Interval_ID","setInterval","current","video","readyState","videoWidth","videoHeight","width","height","estimateFaces","face","ctx","getContext","estimateSinglePose","pose","time_array_1_L","time_array_1_R","count_array_1_L","count_array_1_R","label_1_L","label_1_R","time_array_2_L","time_array_2_R","count_array_2_L","count_array_2_R","label_2_L","label_2_R","time_array_3_L","time_array_3_R","count_array_3_L","count_array_3_R","label_3_L","label_3_R","time_array_4_L","time_array_4_R","count_array_4_L","count_array_4_R","label_4_L","label_4_R","real_dist_v","real_dist_h","length","slice","i","tmp","data1_L","labels","datasets","label","fill","lineTension","backgroundColor","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","pointBorderColor","pointBackgroundColor","pointBorderWidth","pointHoverRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","pointRadius","pointHitRadius","data","data1_R","data2_L","data2_R","data3_L","data3_R","data4_L","data4_R","current_moment","dist_array","dist_time_array","lm1","lm2","clearInterval","clearRect","text","x","y","real_time_inference","estimateHands","hand","forEach","prediction","landmarks","pawn_dist","norm","y_dist","index_dist","current_dist","rotate_dist","fist_dist","max_move","pinky_rest","ring_rest","middle_rest","index_rest","thumb_rest","fist_passed","moved","Math","abs","max","image","getScreenshot","img","src","onload","record","button_1","button_2","position","marginLeft","marginRight","left","right","textAlign","zindex","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Button from '@material-ui/core/Button';\r\nimport * as handpose from \"@tensorflow-models/handpose\";\r\nimport * as posenet from \"@tensorflow-models/posenet\";\r\nimport * as facemesh from \"@tensorflow-models/facemesh\";\r\n//import * as tf from '@tensorflow/tfjs-core';\r\nimport Webcam from \"react-webcam\";\r\nimport \"./App.css\";\r\nimport { drawHand_tap, drawHand_rotate, drawHand_fist, drawHand_still, writeText, drawKeypoints, drawSkeleton, drawMesh } from \"./utilities\";\r\nimport { sqrt, pow } from \"mathjs\"\r\nimport {Line} from 'react-chartjs-2';\r\nimport handline from './HandLines1.jpg';\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      ID : 0,\r\n      tap_count : [],\r\n      rotate_count : [],\r\n      fist_count : [],\r\n      last_hand_L: [],\r\n      last_hand_R: [],\r\n      index_passed : 0,\r\n      min_dist: 0,\r\n      max_dist: 999.0,\r\n      rotate_passed : 0,\r\n      last_pressed:0,\r\n\r\n      real_time_inferencing:false,\r\n      recording:false,\r\n      button_mode:false,\r\n      chart_ready:false,\r\n      finger_done : false,\r\n      rotate_done : false,\r\n      fist_done : false,\r\n\r\n      hand_dist_array_L : [],\r\n      hand_dist_array_R : [],\r\n      hand_rotate_array_L : [],\r\n      hand_rotate_array_R : [],\r\n      hand_fist_array_L : [],\r\n      hand_fist_array_R : [],\r\n      hand_still_array_L : [],\r\n      hand_still_array_R : [],\r\n\r\n      dist_array_L : [],\r\n      dist_time_array_L : [],\r\n      dist_record_L : [],\r\n      dist_time_record_L : [],\r\n      dist_array_R : [],\r\n      dist_time_array_R : [],\r\n      dist_record_R : [],\r\n      dist_time_record_R : [],\r\n\r\n      rotate_array_L : [],\r\n      rotate_time_array_L : [],\r\n      rotate_record_L : [],\r\n      rotate_time_record_L : [],\r\n      rotate_array_R : [],\r\n      rotate_time_array_R : [],\r\n      rotate_record_R : [],\r\n      rotate_time_record_R : [],\r\n\r\n      fist_array_L : [],\r\n      fist_time_array_L : [],\r\n      fist_record_L : [],\r\n      fist_time_record_L : [],\r\n      fist_array_R : [],\r\n      fist_time_array_R : [],\r\n      fist_record_R : [],\r\n      fist_time_record_R : [],\r\n\r\n      still_array_L : [],\r\n      still_time_array_L : [],\r\n      still_record_L : [],\r\n      still_time_record_L : [],\r\n      still_array_R : [],\r\n      still_time_array_R : [],\r\n      still_record_R : [],\r\n      still_time_record_R : [],\r\n\r\n      chart_data1_L : null,\r\n      chart_data1_R : null,\r\n      chart_data2_L : null,\r\n      chart_data2_R : null,\r\n      chart_data3_L : null,\r\n      chart_data3_R : null,\r\n      chart_data4_L : null,\r\n      chart_data4_R : null,\r\n\r\n      stage:0,\r\n      wait : false,\r\n      wait_till : 0,\r\n      max_tremor_L: 0.0,\r\n      max_tremor_R: 0.0,\r\n\r\n      startAt: Date.now(),\r\n      dead_frame: 0,\r\n      raw: true,\r\n      facingMode: \"user\",\r\n      avg_fps: 0,\r\n    };\r\n    this.webcamRef = React.createRef(null);\r\n    this.canvasRef = React.createRef(null);\r\n    this.videoConstraints = {facingMode: \"user\"};\r\n    this.capture_interval = 50;\r\n    this.runHandpose = this.runHandpose.bind(this);\r\n    this.stop_real_time_inference = this.stop_real_time_inference.bind(this);\r\n    this.stop_tapping = this.stop_tapping.bind(this);\r\n    this.stop_rotating = this.stop_rotating.bind(this);\r\n    this.stop_gripping = this.stop_gripping.bind(this);\r\n    this.stop_record = this.stop_record.bind(this);\r\n    this.record_video = this.record_video.bind(this);\r\n    this.concat_frame = this.concat_frame.bind(this);\r\n    this.inference = this.inference.bind(this);\r\n    this.reset_counter = this.reset_counter.bind(this);\r\n    this.increment_tap1 = this.increment_tap1.bind(this);\r\n    this.increment_tap2 = this.increment_tap2.bind(this);\r\n    this.switch_button = this.switch_button.bind(this);\r\n    this.compose_chart = this.compose_chart.bind(this);\r\n    this.runPosenet = this.runPosenet.bind(this);\r\n    this.real_time_posenet = this.real_time_posenet.bind(this);\r\n    this.runFacemesh = this.runFacemesh.bind(this);\r\n    this.real_time_facemesh = this.real_time_facemesh.bind(this);\r\n    this.switch_style = this.switch_style.bind(this);\r\n    this.switch_cam = this.switch_cam.bind(this);\r\n    this.getArray = this.getArray.bind(this);\r\n    this.exportToJson = this.exportToJson.bind(this);\r\n    this.next_step = this.next_step.bind(this);\r\n  }\r\n\r\n  switch_cam(){\r\n    if (this.state.facingMode === \"user\") this.setState({facingMode: \"environment\"});\r\n    else if (this.state.facingMode === \"environment\") this.setState({facingMode: \"user\"});\r\n  }\r\n\r\n  async runFacemesh(){\r\n    require('@tensorflow/tfjs-backend-webgl');\r\n    const net = await facemesh.load();\r\n    console.log(\"Facemesh model loaded.\");\r\n    this.setState({startAt:Date.now()});\r\n    const Interval_ID = setInterval(() => {\r\n      this.real_time_facemesh(net);\r\n    }, this.capture_interval);\r\n    this.setState({ID:Interval_ID,\r\n      real_time_inferencing:true});\r\n  }\r\n\r\n  async real_time_facemesh(net) {\r\n    if (this.state.wait){\r\n      this.setState({wait_till:Date.now()+3000});\r\n      this.setState({wait:false});\r\n    }\r\n    if (\r\n      typeof this.webcamRef.current !== \"undefined\" &&\r\n      this.webcamRef.current !== null &&\r\n      this.webcamRef.current.video.readyState === 4\r\n    ) {\r\n      const video = this.webcamRef.current.video;\r\n      const videoWidth = this.webcamRef.current.video.videoWidth;\r\n      const videoHeight = this.webcamRef.current.video.videoHeight;\r\n      this.webcamRef.current.video.width = videoWidth;\r\n      this.webcamRef.current.video.height = videoHeight;\r\n      this.canvasRef.current.width = videoWidth;\r\n      this.canvasRef.current.height = videoHeight;\r\n      const face = await net.estimateFaces(video);\r\n      const ctx = this.canvasRef.current.getContext(\"2d\");\r\n      drawMesh(face, ctx);\r\n    }\r\n  }\r\n\r\n  async runPosenet(){\r\n    require('@tensorflow/tfjs-backend-webgl');\r\n    const net = await posenet.load();\r\n    console.log(\"PoseNet model loaded.\");\r\n    this.setState({startAt:Date.now()});\r\n    const Interval_ID = setInterval(() => {\r\n      this.real_time_posenet(net);\r\n    }, this.capture_interval);\r\n    this.setState({ID:Interval_ID,\r\n      real_time_inferencing:true});\r\n  }\r\n\r\n  async real_time_posenet(net) {\r\n    if (this.state.wait){\r\n      this.setState({wait_till:Date.now()+3000,\r\n        wait:false});\r\n    }\r\n    if (\r\n      typeof this.webcamRef.current !== \"undefined\" &&\r\n      this.webcamRef.current !== null &&\r\n      this.webcamRef.current.video.readyState === 4\r\n    ) {\r\n      const video = this.webcamRef.current.video;\r\n      const videoWidth = this.webcamRef.current.video.videoWidth;\r\n      const videoHeight = this.webcamRef.current.video.videoHeight;\r\n      this.webcamRef.current.video.width = videoWidth;\r\n      this.webcamRef.current.video.height = videoHeight;\r\n      this.canvasRef.current.width = videoWidth;\r\n      this.canvasRef.current.height = videoHeight;\r\n      const pose = await net.estimateSinglePose(video);\r\n      const ctx = this.canvasRef.current.getContext(\"2d\");\r\n      drawKeypoints(pose[\"keypoints\"], 0.6, ctx);\r\n      drawSkeleton(pose[\"keypoints\"], 0.7, ctx);\r\n    }\r\n  }\r\n\r\n  async switch_style(){\r\n    await this.setState({raw: !this.state.raw});\r\n    this.compose_chart();\r\n  }\r\n\r\n  compose_chart(){\r\n    let time_array_1_L = [];\r\n    let time_array_1_R = [];\r\n    let count_array_1_L = [];\r\n    let count_array_1_R = [];\r\n    let label_1_L = \"\";\r\n    let label_1_R = \"\";\r\n    let time_array_2_L = [];\r\n    let time_array_2_R = [];\r\n    let count_array_2_L = [];\r\n    let count_array_2_R = [];\r\n    let label_2_L = \"\";\r\n    let label_2_R = \"\";\r\n    let time_array_3_L = [];\r\n    let time_array_3_R = [];\r\n    let count_array_3_L = [];\r\n    let count_array_3_R = [];\r\n    let label_3_L = \"\";\r\n    let label_3_R = \"\";\r\n    let time_array_4_L = [];\r\n    let time_array_4_R = [];\r\n    let count_array_4_L = [];\r\n    let count_array_4_R = [];\r\n    let label_4_L = \"\";\r\n    let label_4_R = \"\";\r\n    let real_dist_v = document.getElementById(\"real_measurement_v\").value;\r\n    let real_dist_h = document.getElementById(\"real_measurement_h\").value;\r\n    let avg_fps = this.state.hand_dist_array_L.length / \r\n                 (this.state.dist_time_array_L[this.state.dist_time_array_L.length - 1] - \r\n                  this.state.dist_time_array_L[0]);\r\n    this.setState({avg_fps:avg_fps});\r\n    \r\n    if (this.state.raw){\r\n      // Print Data Raw\r\n      if (this.state.dist_array_L.length > 100){\r\n        time_array_1_L = this.state.dist_time_array_L.slice(10, this.state.dist_time_array_L.length-20);\r\n        count_array_1_L = this.state.dist_array_L.slice(10, this.state.dist_array_L.length-20);\r\n      }\r\n      else {\r\n        time_array_1_L = [...this.state.dist_time_array_L];\r\n        count_array_1_L = [...this.state.dist_array_L];\r\n      }\r\n      if (this.state.dist_array_R.length > 100){\r\n        time_array_1_R = this.state.dist_time_array_R.slice(10, this.state.dist_time_array_R.length-20);\r\n        count_array_1_R = this.state.dist_array_R.slice(10, this.state.dist_array_R.length-20);\r\n      }\r\n      else {\r\n        time_array_1_R = [...this.state.dist_time_array_R];\r\n        count_array_1_R = [...this.state.dist_array_R];\r\n      }\r\n      if (this.state.rotate_array_L.length > 100){\r\n        time_array_2_L = this.state.rotate_time_array_L.slice(10, this.state.rotate_time_array_L.length-20);\r\n        count_array_2_L = this.state.rotate_array_L.slice(10, this.state.rotate_array_L.length-20);\r\n      }\r\n      else {\r\n        time_array_2_L = [...this.state.rotate_time_array_L];\r\n        count_array_2_L = [...this.state.rotate_array_L];\r\n      }\r\n      if (this.state.rotate_array_R.length > 100){\r\n        time_array_2_R = this.state.rotate_time_array_R.slice(10, this.state.rotate_time_array_R.length-20);\r\n        count_array_2_R = this.state.rotate_array_R.slice(10, this.state.rotate_array_R.length-20);\r\n      }\r\n      else {\r\n        time_array_2_R = [...this.state.rotate_time_array_R];\r\n        count_array_2_R = [...this.state.rotate_array_R];\r\n      }\r\n      if (this.state.fist_array_L.length > 100){\r\n        time_array_3_L = this.state.fist_time_array_L.slice(10, this.state.fist_time_array_L.length-20);\r\n        count_array_3_L = this.state.fist_array_L.slice(10, this.state.fist_array_L.length-20);\r\n      }\r\n      else {\r\n        time_array_3_L = [...this.state.fist_time_array_L];\r\n        count_array_3_L = [...this.state.fist_array_L];\r\n      }\r\n      if (this.state.fist_array_R.length > 100){\r\n        time_array_3_R = this.state.fist_time_array_R.slice(10, this.state.fist_time_array_R.length-20);\r\n        count_array_3_R = this.state.fist_array_R.slice(10, this.state.fist_array_R.length-20);\r\n      }\r\n      else {\r\n        time_array_3_R = [...this.state.fist_time_array_R];\r\n        count_array_3_R = [...this.state.fist_array_R];\r\n      }\r\n      if (this.state.still_array_L.length > 100){\r\n        time_array_4_L = this.state.still_time_array_L.slice(10, this.state.still_time_array_L.length-20);\r\n        count_array_4_L = this.state.still_array_L.slice(10, this.state.still_array_L.length-20);\r\n      }\r\n      else {\r\n        time_array_4_L = [...this.state.still_time_array_L];\r\n        count_array_4_L = [...this.state.still_array_L];\r\n      }\r\n      if (this.state.still_array_R.length > 100){\r\n        time_array_4_R = this.state.still_time_array_R.slice(10, this.state.still_time_array_R.length-20);\r\n        count_array_4_R = this.state.still_array_R.slice(10, this.state.still_array_R.length-20);\r\n      }\r\n      else {\r\n        time_array_4_R = [...this.state.still_time_array_R];\r\n        count_array_4_R = [...this.state.still_array_R];\r\n      }\r\n      \r\n      // Change to Real Life Measurement\r\n      if (real_dist_v > 0.0001 && real_dist_h > 0.0001){\r\n        label_1_L = \"Distance between Index and Thumb (cm)\";\r\n        label_1_R = \"Distance between Index and Thumb (cm)\";\r\n        label_2_L = \"Relative Location between Left and Right of Hand (cm)\";\r\n        label_2_R = \"Relative Location between Left and Right of Hand (cm)\";\r\n        label_3_L = \"Relative Location between Tip of Fingers and Finger Joints (cm)\";\r\n        label_3_R = \"Relative Location between Tip of Fingers and Finger Joints (cm)\";\r\n        label_4_L = \"Relative Location Moved (cm)\";\r\n        label_4_R = \"Relative Location Moved (cm)\";\r\n        let i = 0;\r\n        let tmp = 0;\r\n        for (i = 0; i < count_array_1_L.length; i++){\r\n          tmp = count_array_1_L[i];\r\n          count_array_1_L[i] = tmp*real_dist_h;\r\n        }\r\n        for (i = 0; i < count_array_1_R.length; i++){\r\n          tmp = count_array_1_R[i];\r\n          count_array_1_R[i] = tmp*real_dist_h;\r\n        }\r\n        for (i = 0; i < count_array_2_L.length; i++){\r\n          tmp = count_array_2_L[i];\r\n          count_array_2_L[i] = tmp*real_dist_v;\r\n        }\r\n        for (i = 0; i < count_array_2_R.length; i++){\r\n          tmp = count_array_2_R[i];\r\n          count_array_2_R[i] = tmp*real_dist_v;\r\n        }\r\n        for (i = 0; i < count_array_3_L.length; i++){\r\n          tmp = count_array_3_L[i];\r\n          count_array_3_L[i] = tmp*real_dist_h;\r\n        }\r\n        for (i = 0; i < count_array_3_R.length; i++){\r\n          tmp = count_array_3_R[i];\r\n          count_array_3_R[i] = tmp*real_dist_h;\r\n        }\r\n        for (i = 0; i < count_array_4_L.length; i++){\r\n          tmp = count_array_4_L[i];\r\n          count_array_4_L[i] = tmp*real_dist_h;\r\n        }\r\n        for (i = 0; i < count_array_4_R.length; i++){\r\n          tmp = count_array_4_R[i];\r\n          count_array_4_R[i] = tmp*real_dist_h;\r\n        }\r\n      }\r\n      else{\r\n        label_1_L = \"Distance between Index and Thumb\";\r\n        label_1_R = \"Distance between Index and Thumb\";\r\n        label_2_L = \"Relative Location between Left and Right of Hand\";\r\n        label_2_R = \"Relative Location between Left and Right of Hand\";\r\n        label_3_L = \"Relative Location between Tip of Fingers and Finger Joints\";\r\n        label_3_R = \"Relative Location between Tip of Fingers and Finger Joints\";\r\n        label_4_L = \"Relative Location Moved\";\r\n        label_4_R = \"Relative Location Moved\";\r\n      }\r\n    }\r\n    // Setup Graphs\r\n    const data1_L = {\r\n      labels: time_array_1_L,\r\n      datasets: [        \r\n        {\r\n          label: label_1_L,\r\n          fill: false,\r\n          lineTension: 0.3,\r\n          backgroundColor: 'rgba(75,192,192,0.4)',\r\n          borderColor: 'rgba(75,192,192,1)',\r\n          borderCapStyle: 'butt',\r\n          borderDash: [],\r\n          borderDashOffset: 0.0,\r\n          borderJoinStyle: 'miter',\r\n          pointBorderColor: 'rgba(75,192,192,1)',\r\n          pointBackgroundColor: '#fff',\r\n          pointBorderWidth: 1,\r\n          pointHoverRadius: 5,\r\n          pointHoverBackgroundColor: 'rgba(75,192,192,1)',\r\n          pointHoverBorderColor: 'rgba(220,220,220,1)',\r\n          pointHoverBorderWidth: 2,\r\n          pointRadius: 1,\r\n          pointHitRadius: 10,\r\n          data: count_array_1_L\r\n        }\r\n      ]\r\n    };\r\n    const data1_R = {\r\n      labels: time_array_1_R,\r\n      datasets: [        \r\n        {\r\n          label: label_1_R,\r\n          fill: false,\r\n          lineTension: 0.3,\r\n          backgroundColor: 'rgba(75,192,192,0.4)',\r\n          borderColor: 'rgba(75,192,192,1)',\r\n          borderCapStyle: 'butt',\r\n          borderDash: [],\r\n          borderDashOffset: 0.0,\r\n          borderJoinStyle: 'miter',\r\n          pointBorderColor: 'rgba(75,192,192,1)',\r\n          pointBackgroundColor: '#fff',\r\n          pointBorderWidth: 1,\r\n          pointHoverRadius: 5,\r\n          pointHoverBackgroundColor: 'rgba(75,192,192,1)',\r\n          pointHoverBorderColor: 'rgba(220,220,220,1)',\r\n          pointHoverBorderWidth: 2,\r\n          pointRadius: 1,\r\n          pointHitRadius: 10,\r\n          data: count_array_1_R\r\n        }\r\n      ]\r\n    };\r\n    const data2_L = {\r\n      labels: time_array_2_L,\r\n      datasets: [        \r\n        {\r\n          label: label_2_L,\r\n          fill: false,\r\n          lineTension: 0.1,\r\n          backgroundColor: 'rgba(192,75,192,0.4)',\r\n          borderColor: 'rgba(192,75,192,1)',\r\n          borderCapStyle: 'butt',\r\n          borderDash: [],\r\n          borderDashOffset: 0.0,\r\n          borderJoinStyle: 'miter',\r\n          pointBorderColor: 'rgba(192,75,192,1)',\r\n          pointBackgroundColor: '#fff',\r\n          pointBorderWidth: 1,\r\n          pointHoverRadius: 5,\r\n          pointHoverBackgroundColor: 'rgba(192,75,192,1)',\r\n          pointHoverBorderColor: 'rgba(220,220,220,1)',\r\n          pointHoverBorderWidth: 2,\r\n          pointRadius: 1,\r\n          pointHitRadius: 10,\r\n          data: count_array_2_L \r\n        },\r\n      ]\r\n    };\r\n    const data2_R = {\r\n      labels: time_array_2_R,\r\n      datasets: [        \r\n        {\r\n          label: label_2_R,\r\n          fill: false,\r\n          lineTension: 0.1,\r\n          backgroundColor: 'rgba(192,75,192,0.4)',\r\n          borderColor: 'rgba(192,75,192,1)',\r\n          borderCapStyle: 'butt',\r\n          borderDash: [],\r\n          borderDashOffset: 0.0,\r\n          borderJoinStyle: 'miter',\r\n          pointBorderColor: 'rgba(192,75,192,1)',\r\n          pointBackgroundColor: '#fff',\r\n          pointBorderWidth: 1,\r\n          pointHoverRadius: 5,\r\n          pointHoverBackgroundColor: 'rgba(192,75,192,1)',\r\n          pointHoverBorderColor: 'rgba(220,220,220,1)',\r\n          pointHoverBorderWidth: 2,\r\n          pointRadius: 1,\r\n          pointHitRadius: 10,\r\n          data: count_array_2_R \r\n        },\r\n      ]\r\n    };\r\n    const data3_L = {\r\n      labels: time_array_3_L,\r\n      datasets: [        \r\n        {\r\n          label: label_3_L,\r\n          fill: false,\r\n          lineTension: 0.1,\r\n          backgroundColor: 'rgba(192,192,75,0.4)',\r\n          borderColor: 'rgba(192,192,75,1)',\r\n          borderCapStyle: 'butt',\r\n          borderDash: [],\r\n          borderDashOffset: 0.0,\r\n          borderJoinStyle: 'miter',\r\n          pointBorderColor: 'rgba(192,192,75,1)',\r\n          pointBackgroundColor: '#fff',\r\n          pointBorderWidth: 1,\r\n          pointHoverRadius: 5,\r\n          pointHoverBackgroundColor: 'rgba(192,192,75,1)',\r\n          pointHoverBorderColor: 'rgba(220,220,220,1)',\r\n          pointHoverBorderWidth: 2,\r\n          pointRadius: 1,\r\n          pointHitRadius: 10,\r\n          data: count_array_3_L\r\n        }\r\n      ]\r\n    };\r\n    const data3_R = {\r\n      labels: time_array_3_R,\r\n      datasets: [        \r\n        {\r\n          label: label_3_R,\r\n          fill: false,\r\n          lineTension: 0.1,\r\n          backgroundColor: 'rgba(192,192,75,0.4)',\r\n          borderColor: 'rgba(192,192,75,1)',\r\n          borderCapStyle: 'butt',\r\n          borderDash: [],\r\n          borderDashOffset: 0.0,\r\n          borderJoinStyle: 'miter',\r\n          pointBorderColor: 'rgba(192,192,75,1)',\r\n          pointBackgroundColor: '#fff',\r\n          pointBorderWidth: 1,\r\n          pointHoverRadius: 5,\r\n          pointHoverBackgroundColor: 'rgba(192,192,75,1)',\r\n          pointHoverBorderColor: 'rgba(220,220,220,1)',\r\n          pointHoverBorderWidth: 2,\r\n          pointRadius: 1,\r\n          pointHitRadius: 10,\r\n          data: count_array_3_R\r\n        }\r\n      ]\r\n    };\r\n    const data4_L = {\r\n      labels: time_array_4_L,\r\n      datasets: [        \r\n        {\r\n          label: label_4_L,\r\n          fill: false,\r\n          lineTension: 0.1,\r\n          backgroundColor: 'rgba(75,192,75,0.4)',\r\n          borderColor: 'rgba(75,192,75,1)',\r\n          borderCapStyle: 'butt',\r\n          borderDash: [],\r\n          borderDashOffset: 0.0,\r\n          borderJoinStyle: 'miter',\r\n          pointBorderColor: 'rgba(75,192,75,1)',\r\n          pointBackgroundColor: '#fff',\r\n          pointBorderWidth: 1,\r\n          pointHoverRadius: 5,\r\n          pointHoverBackgroundColor: 'rgba(75,192,75,1)',\r\n          pointHoverBorderColor: 'rgba(220,220,220,1)',\r\n          pointHoverBorderWidth: 2,\r\n          pointRadius: 1,\r\n          pointHitRadius: 10,\r\n          data: count_array_4_L\r\n        }\r\n      ]\r\n    };\r\n    const data4_R = {\r\n      labels: time_array_4_R,\r\n      datasets: [        \r\n        {\r\n          label: label_4_R,\r\n          fill: false,\r\n          lineTension: 0.1,\r\n          backgroundColor: 'rgba(75,192,75,0.4)',\r\n          borderColor: 'rgba(75,192,75,1)',\r\n          borderCapStyle: 'butt',\r\n          borderDash: [],\r\n          borderDashOffset: 0.0,\r\n          borderJoinStyle: 'miter',\r\n          pointBorderColor: 'rgba(75,192,75,1)',\r\n          pointBackgroundColor: '#fff',\r\n          pointBorderWidth: 1,\r\n          pointHoverRadius: 5,\r\n          pointHoverBackgroundColor: 'rgba(75,192,75,1)',\r\n          pointHoverBorderColor: 'rgba(220,220,220,1)',\r\n          pointHoverBorderWidth: 2,\r\n          pointRadius: 1,\r\n          pointHitRadius: 10,\r\n          data: count_array_4_R\r\n        }\r\n      ]\r\n    };\r\n    this.setState({chart_data1_L:data1_L});\r\n    this.setState({chart_data1_R:data1_R});\r\n    this.setState({chart_data2_L:data2_L});\r\n    this.setState({chart_data2_R:data2_R});\r\n    this.setState({chart_data3_L:data3_L});\r\n    this.setState({chart_data3_R:data3_R});\r\n    this.setState({chart_data4_L:data4_L});\r\n    this.setState({chart_data4_R:data4_R});\r\n    this.setState({chart_ready:true});\r\n  }\r\n\r\n  switch_button(){\r\n    if (this.state.button_mode === true){\r\n      this.setState({button_mode:false});\r\n      this.compose_chart();\r\n    }\r\n    else{\r\n      this.setState({button_mode:true})\r\n    }\r\n  }\r\n\r\n  increment_tap1(){\r\n    if (this.state.last_pressed !== 1){\r\n      let current_moment = (Date.now() - this.state.startAt)/1000\r\n      this.setState({last_pressed:1})\r\n      this.setState({dist_array:[...this.state.dist_array, 1.0]});\r\n      this.setState({dist_time_array:[...this.state.dist_time_array, current_moment]});\r\n      this.setState({tap_count:[...this.state.tap_count, current_moment]});\r\n    }\r\n  }\r\n\r\n  increment_tap2(){\r\n    if (this.state.last_pressed !== 2){\r\n      let current_moment = (Date.now() - this.state.startAt)/1000\r\n      this.setState({last_pressed:2})\r\n      this.setState({dist_array:[...this.state.dist_array, 1.0]});\r\n      this.setState({dist_time_array:[...this.state.dist_time_array, current_moment]});\r\n      this.setState({tap_count:[...this.state.tap_count, current_moment]});\r\n    }\r\n  }\r\n\r\n  norm(lm1, lm2){\r\n    return sqrt(pow(lm1[0]-lm2[0], 2)+pow(lm1[1]-lm2[1], 2))\r\n  }\r\n\r\n  reset_counter(){\r\n    clearInterval(this.state.ID);\r\n    const ctx = this.canvasRef.current.getContext(\"2d\");\r\n    ctx.clearRect(0,0, this.canvasRef.current.width, this.canvasRef.current.height);\r\n    this.setState({\r\n      ID : 0,\r\n      tap_count : [],\r\n      rotate_count : [],\r\n      fist_count : [],\r\n      last_hand_L: [],\r\n      last_hand_R: [],\r\n      index_passed : 0,\r\n      min_dist: 0,\r\n      max_dist: 99.0,\r\n      rotate_passed : 0,\r\n      last_pressed:0,\r\n\r\n      real_time_inferencing:false,\r\n      recording:false,\r\n      button_mode:false,\r\n      chart_ready:false,\r\n      finger_done : false,\r\n      rotate_done : false,\r\n      fist_done : false,\r\n\r\n      hand_dist_array_L : [],\r\n      hand_dist_array_R : [],\r\n      hand_rotate_array_L : [],\r\n      hand_rotate_array_R : [],\r\n      hand_fist_array_L : [],\r\n      hand_fist_array_R : [],\r\n      hand_still_array_L : [],\r\n      hand_still_array_R : [],\r\n\r\n      dist_array_L : [],\r\n      dist_time_array_L : [],\r\n      dist_record_L : [],\r\n      dist_time_record_L : [],\r\n      dist_array_R : [],\r\n      dist_time_array_R : [],\r\n      dist_record_R : [],\r\n      dist_time_record_R : [],\r\n\r\n      rotate_array_L : [],\r\n      rotate_time_array_L : [],\r\n      rotate_record_L : [],\r\n      rotate_time_record_L : [],\r\n      rotate_array_R : [],\r\n      rotate_time_array_R : [],\r\n      rotate_record_R : [],\r\n      rotate_time_record_R : [],\r\n\r\n      fist_array_L : [],\r\n      fist_time_array_L : [],\r\n      fist_record_L : [],\r\n      fist_time_record_L : [],\r\n      fist_array_R : [],\r\n      fist_time_array_R : [],\r\n      fist_record_R : [],\r\n      fist_time_record_R : [],\r\n\r\n      still_array_L : [],\r\n      still_time_array_L : [],\r\n      still_record_L : [],\r\n      still_time_record_L : [],\r\n      still_array_R : [],\r\n      still_time_array_R : [],\r\n      still_record_R : [],\r\n      still_time_record_R : [],\r\n\r\n      chart_data1_L : null,\r\n      chart_data1_R : null,\r\n      chart_data2_L : null,\r\n      chart_data2_R : null,\r\n      chart_data3_L : null,\r\n      chart_data3_R : null,\r\n      chart_data4_L : null,\r\n      chart_data4_R : null,\r\n\r\n      stage:0,\r\n      wait : false,\r\n      wait_till : 0,\r\n\r\n      startAt: Date.now(),\r\n      dead_frame: 0,\r\n      raw: true,\r\n      facingMode: \"user\",\r\n      avg_fps: 0,\r\n    });\r\n  }\r\n\r\n  sleep = (milliseconds) => {\r\n    return new Promise(resolve => setTimeout(resolve, milliseconds))\r\n  }\r\n\r\n  async runHandpose() {\r\n    const ctx = this.canvasRef.current.getContext(\"2d\");\r\n    writeText(ctx, { text: 'Loading', x: 180, y: 70 });\r\n    require('@tensorflow/tfjs-backend-webgl');\r\n    const net = await handpose.load();\r\n    ctx.clearRect(0,0, this.canvasRef.current.width, this.canvasRef.current.height);\r\n    //const uploadJSONInput = document.getElementById('upload-json');\r\n    //const uploadWeightsInput = document.getElementById('upload-weights');\r\n    //const model = await tf.loadLayersModel(tf.io.browserFiles([uploadJSONInput.files[0], uploadWeightsInput.files[0]]));\r\n    console.log(\"Handpose model loaded.\");\r\n    this.setState({startAt:Date.now()});\r\n    const Interval_ID = setInterval(() => {\r\n      this.real_time_inference(net);\r\n    }, this.capture_interval);\r\n    this.setState({ID:Interval_ID,\r\n      real_time_inferencing:true,\r\n      wait:true,\r\n      stage:this.state.stage + 1});\r\n  };\r\n\r\n  async real_time_inference(net) {\r\n    if (this.state.wait){\r\n      this.setState({wait_till:Date.now()+3000});\r\n      this.setState({wait:false});\r\n    }\r\n    if (\r\n      typeof this.webcamRef.current !== \"undefined\" &&\r\n      this.webcamRef.current !== null &&\r\n      this.webcamRef.current.video.readyState === 4\r\n    ) {\r\n      const video = this.webcamRef.current.video;\r\n      const videoWidth = this.webcamRef.current.video.videoWidth;\r\n      const videoHeight = this.webcamRef.current.video.videoHeight;\r\n      this.webcamRef.current.video.width = videoWidth;\r\n      this.webcamRef.current.video.height = videoHeight;\r\n      this.canvasRef.current.width = videoWidth;\r\n      this.canvasRef.current.height = videoHeight;\r\n      const hand = await net.estimateHands(video);\r\n      const ctx = this.canvasRef.current.getContext(\"2d\");\r\n      \r\n      //check if waiting\r\n      if (Date.now() < this.state.wait_till){\r\n        if (hand.length > 0) drawHand_tap (hand, ctx);\r\n        \r\n        //count down 3, 2, 1\r\n        if (this.state.wait_till - Date.now() < 1000) writeText(ctx, { text: '1', x: 180, y: 70 });\r\n        else if (this.state.wait_till - Date.now() < 2000) writeText(ctx, { text: '2', x: 140, y: 70 });\r\n        else if (this.state.wait_till - Date.now() < 3000) writeText(ctx, { text: '3', x: 100, y: 70 });\r\n      }\r\n      else {\r\n        switch(this.state.stage){\r\n          case 1:\r\n            this.setState({hand_dist_array_L:[...this.state.hand_dist_array_L, hand]});\r\n            break;\r\n          case 2:\r\n            this.setState({hand_dist_array_R:[...this.state.hand_dist_array_R, hand]});\r\n            break;\r\n          case 3:\r\n            this.setState({hand_rotate_array_L:[...this.state.hand_rotate_array_L, hand]});\r\n            break;\r\n          case 4:\r\n            this.setState({hand_rotate_array_R:[...this.state.hand_rotate_array_R, hand]});\r\n            break;\r\n          case 5:\r\n            this.setState({hand_fist_array_L:[...this.state.hand_fist_array_L, hand]});\r\n            break;\r\n          case 6:\r\n            this.setState({hand_fist_array_R:[...this.state.hand_fist_array_R, hand]});\r\n            break;\r\n          case 7:\r\n            this.setState({hand_still_array_L:[...this.state.hand_still_array_L, hand]});\r\n            break;\r\n          case 8:\r\n            this.setState({hand_still_array_R:[...this.state.hand_still_array_R, hand]});\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        if (hand.length > 0){\r\n          hand.forEach((prediction) => {\r\n            this.setState({dead_frame: 0});\r\n            const landmarks = prediction.landmarks\r\n\r\n            let pawn_dist = this.norm(landmarks[0], landmarks[2]);\r\n            let y_dist = this.norm(landmarks[0], landmarks[12]);\r\n            let current_moment = (Date.now() - this.state.startAt)/1000\r\n            let index_dist = null;\r\n            let current_dist = null;\r\n            let rotate_dist = null;\r\n            let fist_dist = null;\r\n            let max_move = null;\r\n            let pinky_rest = null;\r\n            let ring_rest = null;\r\n            let middle_rest = null;\r\n            let index_rest = null;\r\n            let thumb_rest = null;\r\n\r\n            switch (this.state.stage){\r\n              case 1:\r\n                drawHand_tap (hand, ctx);\r\n                index_dist = this.norm(landmarks[4], landmarks[8]);\r\n                current_dist = index_dist/pawn_dist;\r\n                this.setState({dist_array_L:[...this.state.dist_array_L, current_dist],\r\n                  dist_time_array_L:[...this.state.dist_time_array_L, current_moment],\r\n                });\r\n                if (this.state.index_passed === 0 && (current_dist - this.state.min_dist) > 0.2){\r\n                  this.setState({index_passed:1,\r\n                    max_dist: current_dist});\r\n                }\r\n                if (this.state.index_passed === 1 && current_dist > this.state.max_dist){\r\n                  this.setState({max_dist: current_dist});\r\n                }\r\n                if (this.state.index_passed === 1 && (this.state.max_dist - current_dist) > 0.2){\r\n                  this.setState({index_passed:0,\r\n                    min_dist: current_dist,\r\n                    tap_count:[...this.state.tap_count, current_moment]});\r\n                }\r\n                if (this.state.index_passed === 0 && current_dist < this.state.min_dist){\r\n                  this.setState({min_dist: current_dist});\r\n                }\r\n                break;\r\n              case 2:\r\n                drawHand_tap (hand, ctx);\r\n                index_dist = this.norm(landmarks[4], landmarks[8]);\r\n                current_dist = index_dist/pawn_dist;\r\n                this.setState({dist_array_R:[...this.state.dist_array_R, current_dist],\r\n                  dist_time_array_R:[...this.state.dist_time_array_R, current_moment],\r\n                });\r\n                if (this.state.index_passed === 0 && (current_dist - this.state.min_dist) > 0.2){\r\n                  this.setState({index_passed:1,\r\n                    max_dist: current_dist});\r\n                }\r\n                if (this.state.index_passed === 1 && current_dist > this.state.max_dist){\r\n                  this.setState({max_dist: current_dist});\r\n                }\r\n                if (this.state.index_passed === 1 && (this.state.max_dist - current_dist) > 0.2){\r\n                  this.setState({index_passed:0,\r\n                    min_dist: current_dist,\r\n                    tap_count:[...this.state.tap_count, current_moment]});\r\n                }\r\n                if (this.state.index_passed === 0 && current_dist < this.state.min_dist){\r\n                  this.setState({min_dist: current_dist});\r\n                }\r\n                break;\r\n              case 3:\r\n                drawHand_rotate (hand, ctx, this.state.rotate_passed);\r\n                rotate_dist = (landmarks[2][0] - landmarks[17][0]) / y_dist;\r\n                this.setState({rotate_array_L:[...this.state.rotate_array_L, rotate_dist],\r\n                  rotate_time_array_L:[...this.state.rotate_time_array_L, current_moment],\r\n                });\r\n                if (this.state.rotate_passed === 0){\r\n                  if (rotate_dist >= 0.2) this.setState({rotate_passed:1});\r\n                  if (rotate_dist <= -0.2) this.setState({rotate_passed:-1});\r\n                }\r\n                if (this.state.rotate_passed === 1 && rotate_dist <= -0.2){\r\n                  this.setState({rotate_passed:-1});\r\n                }\r\n                if (this.state.rotate_passed === -1 && rotate_dist >= 0.2){\r\n                  this.setState({rotate_passed:1,\r\n                    rotate_count:[...this.state.rotate_count, current_moment]});\r\n                }\r\n                break;\r\n              case 4:\r\n                drawHand_rotate (hand, ctx, this.state.rotate_passed);\r\n                rotate_dist = (landmarks[2][0] - landmarks[17][0]) / y_dist;\r\n                this.setState({rotate_array_R:[...this.state.rotate_array_R, rotate_dist],\r\n                  rotate_time_array_R:[...this.state.rotate_time_array_R, current_moment],\r\n                });\r\n                if (this.state.rotate_passed === 0){\r\n                  if (rotate_dist >= 0.2) this.setState({rotate_passed:1});\r\n                  if (rotate_dist <= -0.2) this.setState({rotate_passed:-1});\r\n                }\r\n                if (this.state.rotate_passed === 1 && rotate_dist <= -0.2){\r\n                  this.setState({rotate_passed:-1});\r\n                }\r\n                if (this.state.rotate_passed === -1 && rotate_dist >= 0.2){\r\n                  this.setState({rotate_passed:1,\r\n                    rotate_count:[...this.state.rotate_count, current_moment]});\r\n                }\r\n                break;\r\n              case 5:\r\n                drawHand_fist (hand, ctx, this.state.fist_passed);\r\n                fist_dist =((landmarks[8][1] - landmarks[5][1])+\r\n                            (landmarks[12][1] - landmarks[9][1])+\r\n                            (landmarks[16][1] - landmarks[13][1])+\r\n                            (landmarks[20][1] - landmarks[17][1]))/\r\n                            (4*pawn_dist)\r\n                this.setState({fist_array_L:[...this.state.fist_array_L, fist_dist],\r\n                  fist_time_array_L:[...this.state.fist_time_array_L, current_moment],\r\n                });\r\n                if (fist_dist >= 0.0){this.setState({fist_passed:1})}\r\n                if (fist_dist < -0.4 && this.state.fist_passed === 1){\r\n                  this.setState({fist_passed:0,\r\n                    fist_count:[...this.state.fist_count, current_moment]});\r\n                }\r\n                break;\r\n              case 6:\r\n                drawHand_fist (hand, ctx, this.state.fist_passed);\r\n                fist_dist =((landmarks[8][1] - landmarks[5][1])+\r\n                            (landmarks[12][1] - landmarks[9][1])+\r\n                            (landmarks[16][1] - landmarks[13][1])+\r\n                            (landmarks[20][1] - landmarks[17][1]))/\r\n                            (4*pawn_dist)\r\n                this.setState({fist_array_R:[...this.state.fist_array_R, fist_dist],\r\n                  fist_time_array_R:[...this.state.fist_time_array_R, current_moment],\r\n                });\r\n                if (fist_dist >= 0.0){this.setState({fist_passed:1})}\r\n                if (fist_dist < -0.4 && this.state.fist_passed === 1){\r\n                  this.setState({fist_passed:0,\r\n                    fist_count:[...this.state.fist_count, current_moment]});\r\n                }\r\n                break;\r\n              case 7:\r\n                max_move = 0.0;\r\n                if (this.state.last_hand_L.length > 0){\r\n                  let moved = [];\r\n                  pinky_rest = Math.abs(this.norm(landmarks[0], landmarks[4]) - this.norm(this.state.last_hand_L[0], this.state.last_hand_L[4]))/pawn_dist;\r\n                  ring_rest = Math.abs(this.norm(landmarks[0], landmarks[8]) - this.norm(this.state.last_hand_L[0], this.state.last_hand_L[8]))/pawn_dist;\r\n                  middle_rest = Math.abs(this.norm(landmarks[0], landmarks[12]) - this.norm(this.state.last_hand_L[0], this.state.last_hand_L[12]))/pawn_dist;\r\n                  index_rest = Math.abs(this.norm(landmarks[0], landmarks[16]) - this.norm(this.state.last_hand_L[0], this.state.last_hand_L[16]))/pawn_dist;\r\n                  thumb_rest = Math.abs(this.norm(landmarks[0], landmarks[20]) - this.norm(this.state.last_hand_L[0], this.state.last_hand_L[20]))/pawn_dist;\r\n                  if (pinky_rest > 0.2) moved = [...moved, 4];\r\n                  if (ring_rest > 0.2) moved = [...moved, 8];\r\n                  if (middle_rest > 0.2) moved = [...moved, 12];\r\n                  if (index_rest > 0.2) moved = [...moved, 16];\r\n                  if (thumb_rest > 0.2) moved = [...moved, 20];\r\n                  max_move = Math.max(pinky_rest, ring_rest, middle_rest, index_rest, thumb_rest);\r\n                  if (max_move > this.state.max_tremor_L) this.setState({max_tremor_L:max_move});\r\n                  drawHand_still (hand, ctx, moved);\r\n                }\r\n                else{\r\n                  this.setState({last_hand_L: landmarks});\r\n                }\r\n                this.setState({still_array_L:[...this.state.still_array_L, max_move],\r\n                  still_time_array_L:[...this.state.still_time_array_L, current_moment],\r\n                });\r\n                break;\r\n              case 8:\r\n                max_move = 0.0;\r\n                if (this.state.last_hand_R.length > 0){\r\n                  let moved = [];\r\n                  pinky_rest = Math.abs(this.norm(landmarks[0], landmarks[4]) - this.norm(this.state.last_hand_R[0], this.state.last_hand_R[4]))/pawn_dist;\r\n                  ring_rest = Math.abs(this.norm(landmarks[0], landmarks[8]) - this.norm(this.state.last_hand_R[0], this.state.last_hand_R[8]))/pawn_dist;\r\n                  middle_rest = Math.abs(this.norm(landmarks[0], landmarks[12]) - this.norm(this.state.last_hand_R[0], this.state.last_hand_R[12]))/pawn_dist;\r\n                  index_rest = Math.abs(this.norm(landmarks[0], landmarks[16]) - this.norm(this.state.last_hand_R[0], this.state.last_hand_R[16]))/pawn_dist;\r\n                  thumb_rest = Math.abs(this.norm(landmarks[0], landmarks[20]) - this.norm(this.state.last_hand_R[0], this.state.last_hand_R[20]))/pawn_dist;\r\n                  if (pinky_rest > 0.2) moved = [...moved, 4];\r\n                  if (ring_rest > 0.2) moved = [...moved, 8];\r\n                  if (middle_rest > 0.2) moved = [...moved, 12];\r\n                  if (index_rest > 0.2) moved = [...moved, 16];\r\n                  if (thumb_rest > 0.2) moved = [...moved, 20];\r\n                  max_move = Math.max(pinky_rest, ring_rest, middle_rest, index_rest, thumb_rest);\r\n                  if (max_move > this.state.max_tremor_R) this.setState({max_tremor_R:max_move});\r\n                  drawHand_still (hand, ctx, moved);\r\n                }\r\n                else{\r\n                  this.setState({last_hand_R: landmarks});\r\n                }\r\n                this.setState({still_array_R:[...this.state.still_array_R, max_move],\r\n                  still_time_array_R:[...this.state.still_time_array_R, current_moment],\r\n                });\r\n                break;\r\n              default:\r\n                console.log(\"Should Not Print\");\r\n                break;\r\n            }\r\n          });\r\n        }\r\n        else {\r\n          // Warning message for hand off screen\r\n          if (this.state.dead_frame > 9) writeText(ctx, { text: 'Hand Off Screen', x: 180, y: 70 });\r\n          this.setState({dead_frame: this.state.dead_frame + 1});\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  async next_step(){\r\n    if (this.state.stage !== 8)\r\n      this.setState({stage:this.state.stage + 1,\r\n        wait:true});\r\n    else{\r\n      clearInterval(this.state.ID);\r\n      if (this.state.recording === true) await this.inference();\r\n      this.setState({real_time_inferencing:false,\r\n        recording:false,\r\n        stage:0});\r\n      this.compose_chart();\r\n      const ctx = this.canvasRef.current.getContext(\"2d\");\r\n      ctx.clearRect(0,0, this.canvasRef.current.width, this.canvasRef.current.height);\r\n    }\r\n  }\r\n\r\n  async stop_tapping() {\r\n    this.setState({finger_done:true});\r\n    this.setState({wait:true});\r\n  }\r\n\r\n  async stop_rotating() {\r\n    this.setState({rotate_done:true});\r\n    this.setState({wait:true});\r\n  }\r\n\r\n  async stop_gripping() {\r\n    this.setState({fist_done:true});\r\n    this.setState({wait:true});\r\n  }\r\n\r\n  stop_real_time_inference() {\r\n    clearInterval(this.state.ID);\r\n    this.setState({real_time_inferencing:false,\r\n                   finger_done:false,\r\n                   rotate_done:false,\r\n                   fist_done:false});\r\n    this.compose_chart();\r\n    const ctx = this.canvasRef.current.getContext(\"2d\");\r\n    ctx.clearRect(0,0, this.canvasRef.current.width, this.canvasRef.current.height);\r\n  }\r\n\r\n  async record_video(){\r\n    this.setState({startAt:Date.now()});\r\n    console.log(\"Handpose model loaded.\");\r\n    const Interval_ID = setInterval(() => {\r\n      this.concat_frame();\r\n    }, this.capture_interval);\r\n    this.setState({ID:Interval_ID,\r\n      recording:true,\r\n      wait:true,\r\n      stage:this.state.stage + 1});\r\n  }\r\n\r\n  async concat_frame() {\r\n    if (this.state.wait){\r\n      this.setState({wait_till:Date.now()+3000,\r\n        wait:false});\r\n    }\r\n    if (\r\n      typeof this.webcamRef.current !== \"undefined\" &&\r\n      this.webcamRef.current !== null &&\r\n      this.webcamRef.current.video.readyState === 4\r\n    ) {\r\n      if (Date.now() < this.state.wait_till){\r\n        //console.log(\"Waiting till \", this.state.wait_till);\r\n        //count down 3, 2, 1\r\n        const ctx = this.canvasRef.current.getContext(\"2d\");\r\n        if (this.state.wait_till - Date.now() < 250) ctx.clearRect(0,0, this.canvasRef.current.width, this.canvasRef.current.height);\r\n        else if (this.state.wait_till - Date.now() < 1000) writeText(ctx, { text: '1', x: 180, y: 70 });\r\n        else if (this.state.wait_till - Date.now() < 2000) writeText(ctx, { text: '2', x: 140, y: 70 });\r\n        else if (this.state.wait_till - Date.now() < 3000) writeText(ctx, { text: '3', x: 100, y: 70 });\r\n      }\r\n      else {\r\n        let current_moment = (Date.now() - this.state.startAt)/1000;\r\n        const image = this.webcamRef.current.getScreenshot();      \r\n        var img = document.createElement(\"img\");\r\n        img.src = image;\r\n        img.onload = function(){\r\n          switch (this.state.stage){\r\n            case 1:\r\n              this.setState({dist_record_L:[...this.state.dist_record_L, img],\r\n                dist_time_record_L:[...this.state.dist_time_record_L, current_moment]});\r\n              break;\r\n            case 2:\r\n              this.setState({dist_record_R:[...this.state.dist_record_R, img],\r\n                dist_time_record_R:[...this.state.dist_time_record_R, current_moment]});\r\n              break;\r\n            case 3:\r\n              this.setState({rotate_record_L:[...this.state.rotate_record_L, img],\r\n                rotate_time_record_L:[...this.state.rotate_time_record_L, current_moment]});\r\n              break;\r\n            case 4:\r\n              this.setState({rotate_record_R:[...this.state.rotate_record_R, img],\r\n                rotate_time_record_R:[...this.state.rotate_time_record_R, current_moment]});\r\n              break;\r\n            case 5:\r\n              this.setState({fist_record_L:[...this.state.fist_record_L, img],\r\n                fist_time_record_L:[...this.state.fist_time_record_L, current_moment]});\r\n              break;\r\n            case 6:\r\n              this.setState({fist_record_R:[...this.state.fist_record_R, img],\r\n                fist_time_record_R:[...this.state.fist_time_record_R, current_moment]});\r\n              break;\r\n            case 7:\r\n              this.setState({still_record_L:[...this.state.still_record_L, img],\r\n                still_time_record_L:[...this.state.still_time_record_L, current_moment]});\r\n              break;\r\n            case 8:\r\n              this.setState({still_record_R:[...this.state.still_record_R, img],\r\n                still_time_record_R:[...this.state.still_time_record_R, current_moment]});\r\n              break;\r\n            default:\r\n              console.log('Should print this');\r\n              break;\r\n          }\r\n        }.bind(this)\r\n      }\r\n    }\r\n  }\r\n\r\n  async inference() {\r\n    require('@tensorflow/tfjs-backend-webgl');\r\n    const net = await handpose.load();\r\n    console.log(\"Handpose model loaded.\");\r\n\r\n    // Run prediction on recorded tapping data\r\n    for (let i = 0; i<this.state.dist_record_L.length; i++){\r\n      const hand = await net.estimateHands(this.state.dist_record_L[i]);\r\n      if (hand.length > 0){\r\n        hand.forEach((prediction) => {\r\n          // Calculate relative distance\r\n          const landmarks = prediction.landmarks;\r\n          let current_moment = (Date.now() - this.state.startAt)/1000\r\n          let index_dist = this.norm(landmarks[4], landmarks[8]);\r\n          let pawn_dist = this.norm(landmarks[0], landmarks[2]);\r\n          let current_dist = index_dist/pawn_dist;\r\n          this.setState({dist_array_L:[...this.state.dist_array_L, current_dist],\r\n            dist_time_array_L:[...this.state.dist_time_array_L, current_moment],\r\n          });\r\n          if (this.state.index_passed === 0 && (current_dist - this.state.min_dist) > 0.2){\r\n            this.setState({index_passed:1,\r\n              max_dist: current_dist});\r\n          }\r\n          if (this.state.index_passed === 1 && current_dist > this.state.max_dist){\r\n            this.setState({max_dist: current_dist});\r\n          }\r\n          if (this.state.index_passed === 1 && (this.state.max_dist - current_dist) > 0.2){\r\n            this.setState({index_passed:0,\r\n              min_dist: current_dist,\r\n              tap_count:[...this.state.tap_count, current_moment]});\r\n          }\r\n          if (this.state.index_passed === 0 && current_dist < this.state.min_dist){\r\n            this.setState({min_dist: current_dist});\r\n          }\r\n          console.log(\"INDEX COUNT:\", this.state.tap_count);\r\n        });\r\n      }\r\n    }\r\n    for (let i = 0; i<this.state.dist_record_R.length; i++){\r\n      const hand = await net.estimateHands(this.state.dist_record_R[i]);\r\n      if (hand.length > 0){\r\n        hand.forEach((prediction) => {\r\n          // Calculate relative distance\r\n          const landmarks = prediction.landmarks;\r\n          let current_moment = (Date.now() - this.state.startAt)/1000\r\n          let index_dist = this.norm(landmarks[4], landmarks[8]);\r\n          let pawn_dist = this.norm(landmarks[0], landmarks[2]);\r\n          let current_dist = index_dist/pawn_dist;\r\n          this.setState({dist_array_R:[...this.state.dist_array_R, current_dist],\r\n            dist_time_array_R:[...this.state.dist_time_array_R, current_moment],\r\n          });\r\n          if (this.state.index_passed === 0 && (current_dist - this.state.min_dist) > 0.2){\r\n            this.setState({index_passed:1,\r\n              max_dist: current_dist});\r\n          }\r\n          if (this.state.index_passed === 1 && current_dist > this.state.max_dist){\r\n            this.setState({max_dist: current_dist});\r\n          }\r\n          if (this.state.index_passed === 1 && (this.state.max_dist - current_dist) > 0.2){\r\n            this.setState({index_passed:0,\r\n              min_dist: current_dist,\r\n              tap_count:[...this.state.tap_count, current_moment]});\r\n          }\r\n          if (this.state.index_passed === 0 && current_dist < this.state.min_dist){\r\n            this.setState({min_dist: current_dist});\r\n          }\r\n          console.log(\"INDEX COUNT:\", this.state.tap_count);\r\n        });\r\n      }\r\n    }\r\n    // Run prediction on recorded rotation data\r\n    for (let i = 0; i<this.state.rotate_record_L.length; i++){\r\n      const hand = await net.estimateHands(this.state.rotate_record_L[i]);\r\n      if (hand.length > 0){\r\n        hand.forEach((prediction) => {\r\n          const landmarks = prediction.landmarks;\r\n          let current_moment = (Date.now() - this.state.startAt)/1000\r\n          let pawn_dist = this.norm(landmarks[0], landmarks[12]);\r\n          let rotate_dist = (landmarks[2][0] - landmarks[17][0]) / pawn_dist;\r\n          this.setState({rotate_array_L:[...this.state.rotate_array_L, rotate_dist],\r\n            rotate_time_array_L:[...this.state.rotate_time_array_L, current_moment],\r\n          });\r\n          if (this.state.rotate_passed === 0){\r\n            if (rotate_dist >= 0.2) this.setState({rotate_passed:1});\r\n            if (rotate_dist <= -0.2) this.setState({rotate_passed:-1});\r\n          }\r\n          if (this.state.rotate_passed === 1 && rotate_dist <= -0.2){\r\n            this.setState({rotate_passed:-1});\r\n          }\r\n          if (this.state.rotate_passed === -1 && rotate_dist >= 0.2){\r\n            this.setState({rotate_passed:1,\r\n              rotate_count:[...this.state.rotate_count, current_moment]});\r\n          }\r\n          console.log(\"ROTATE COUNT:\", this.state.rotate_count);\r\n        });\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i<this.state.rotate_record_R.length; i++){\r\n      const hand = await net.estimateHands(this.state.rotate_record_R[i]);\r\n      if (hand.length > 0){\r\n        hand.forEach((prediction) => {\r\n          const landmarks = prediction.landmarks;\r\n          let current_moment = (Date.now() - this.state.startAt)/1000\r\n          let pawn_dist = this.norm(landmarks[0], landmarks[12]);\r\n          let rotate_dist = (landmarks[2][0] - landmarks[17][0]) / pawn_dist;\r\n          this.setState({rotate_array_R:[...this.state.rotate_array_R, rotate_dist],\r\n            rotate_time_array_R:[...this.state.rotate_time_array_R, current_moment],\r\n          });\r\n          if (this.state.rotate_passed === 0){\r\n            if (rotate_dist >= 0.2) this.setState({rotate_passed:1});\r\n            if (rotate_dist <= -0.2) this.setState({rotate_passed:-1});\r\n          }\r\n          if (this.state.rotate_passed === 1 && rotate_dist <= -0.2){\r\n            this.setState({rotate_passed:-1});\r\n          }\r\n          if (this.state.rotate_passed === -1 && rotate_dist >= 0.2){\r\n            this.setState({rotate_passed:1,\r\n              rotate_count:[...this.state.rotate_count, current_moment]});\r\n          }\r\n          console.log(\"ROTATE COUNT:\", this.state.rotate_count);\r\n        });\r\n      }\r\n    }\r\n\r\n    // Run prediction on recorded gripping data\r\n    for (let i = 0; i<this.state.fist_record_L.length; i++){\r\n      const hand = await net.estimateHands(this.state.fist_record_L[i]);\r\n      if (hand.length > 0){\r\n        hand.forEach((prediction) => {\r\n          const landmarks = prediction.landmarks;\r\n          let current_moment = (Date.now() - this.state.startAt)/1000\r\n          let pawn_dist = this.norm(landmarks[0], landmarks[2]);\r\n          let fist_dist =((landmarks[8][1] - landmarks[5][1])+\r\n                          (landmarks[12][1] - landmarks[9][1])+\r\n                          (landmarks[16][1] - landmarks[13][1])+\r\n                          (landmarks[20][1] - landmarks[17][1]))/\r\n                          (4*pawn_dist)\r\n          this.setState({fist_array_L:[...this.state.fist_array_L, fist_dist],\r\n            fist_time_array_L:[...this.state.fist_time_array_L, current_moment],\r\n          });\r\n          if (fist_dist >= 0.0){this.setState({fist_passed:1})}\r\n          if (fist_dist < -0.4 && this.state.fist_passed === 1){\r\n            this.setState({fist_passed:0,\r\n              fist_count:[...this.state.fist_count, current_moment]});\r\n          }\r\n          console.log(\"FIST COUNT:\", this.state.fist_count);\r\n        });\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i<this.state.fist_record_R.length; i++){\r\n      const hand = await net.estimateHands(this.state.fist_record_R[i]);\r\n      if (hand.length > 0){\r\n        hand.forEach((prediction) => {\r\n          const landmarks = prediction.landmarks;\r\n          let current_moment = (Date.now() - this.state.startAt)/1000;\r\n          let pawn_dist = this.norm(landmarks[0], landmarks[2]);\r\n          let fist_dist =((landmarks[8][1] - landmarks[5][1])+\r\n                          (landmarks[12][1] - landmarks[9][1])+\r\n                          (landmarks[16][1] - landmarks[13][1])+\r\n                          (landmarks[20][1] - landmarks[17][1]))/\r\n                          (4*pawn_dist)\r\n          this.setState({fist_array_R:[...this.state.fist_array_R, fist_dist],\r\n            fist_time_array_R:[...this.state.fist_time_array_R, current_moment],\r\n          });\r\n          if (fist_dist >= 0.0){this.setState({fist_passed:1})}\r\n          if (fist_dist < -0.4 && this.state.fist_passed === 1){\r\n            this.setState({fist_passed:0,\r\n              fist_count:[...this.state.fist_count, current_moment]});\r\n          }\r\n          console.log(\"FIST COUNT:\", this.state.fist_count);\r\n        });\r\n      }\r\n    }\r\n\r\n    // Run prediction on recorded postural data\r\n    for (let i = 0; i<this.state.still_record_L.length; i++){\r\n      const hand = await net.estimateHands(this.state.still_record_L[i]);\r\n      if (hand.length > 0){\r\n        hand.forEach((prediction) => {\r\n          const landmarks = prediction.landmarks;\r\n          let current_moment = (Date.now() - this.state.startAt)/1000\r\n          let max_move = 0.0;\r\n          let pawn_dist = this.norm(landmarks[0], landmarks[2]);\r\n          if (this.state.last_hand_L.length > 0){\r\n            let pinky_rest = Math.abs(this.norm(landmarks[0], landmarks[4]) - this.norm(this.state.last_hand_L[0], this.state.last_hand_L[4]))/pawn_dist;\r\n            let ring_rest = Math.abs(this.norm(landmarks[0], landmarks[8]) - this.norm(this.state.last_hand_L[0], this.state.last_hand_L[8]))/pawn_dist;\r\n            let middle_rest = Math.abs(this.norm(landmarks[0], landmarks[12]) - this.norm(this.state.last_hand_L[0], this.state.last_hand_L[12]))/pawn_dist;\r\n            let index_rest = Math.abs(this.norm(landmarks[0], landmarks[16]) - this.norm(this.state.last_hand_L[0], this.state.last_hand_L[16]))/pawn_dist;\r\n            let thumb_rest = Math.abs(this.norm(landmarks[0], landmarks[20]) - this.norm(this.state.last_hand_L[0], this.state.last_hand_L[20]))/pawn_dist;\r\n            max_move = Math.max(pinky_rest, ring_rest, middle_rest, index_rest, thumb_rest);\r\n            if (max_move > this.state.max_tremor_L) this.setState({max_tremor_L:max_move});\r\n          }\r\n          else{\r\n            this.setState({last_hand_L: landmarks});\r\n          }\r\n          this.setState({still_array_L:[...this.state.still_array_L, max_move],\r\n            still_time_array_L:[...this.state.still_time_array_L, current_moment],\r\n          });\r\n        })\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i<this.state.still_record_R.length; i++){\r\n      const hand = await net.estimateHands(this.state.still_record_R[i]);\r\n      if (hand.length > 0){\r\n        hand.forEach((prediction) => {\r\n          const landmarks = prediction.landmarks\r\n          let current_moment = (Date.now() - this.state.startAt)/1000\r\n          let max_move = 0.0;\r\n          let pawn_dist = this.norm(landmarks[0], landmarks[2]);\r\n          if (this.state.last_hand_R.length > 0){\r\n            let pinky_rest = Math.abs(this.norm(landmarks[0], landmarks[4]) - this.norm(this.state.last_hand_L[0], this.state.last_hand_L[4]))/pawn_dist;\r\n            let ring_rest = Math.abs(this.norm(landmarks[0], landmarks[8]) - this.norm(this.state.last_hand_L[0], this.state.last_hand_L[8]))/pawn_dist;\r\n            let middle_rest = Math.abs(this.norm(landmarks[0], landmarks[12]) - this.norm(this.state.last_hand_L[0], this.state.last_hand_L[12]))/pawn_dist;\r\n            let index_rest = Math.abs(this.norm(landmarks[0], landmarks[16]) - this.norm(this.state.last_hand_L[0], this.state.last_hand_L[16]))/pawn_dist;\r\n            let thumb_rest = Math.abs(this.norm(landmarks[0], landmarks[20]) - this.norm(this.state.last_hand_L[0], this.state.last_hand_L[20]))/pawn_dist;\r\n            max_move = Math.max(pinky_rest, ring_rest, middle_rest, index_rest, thumb_rest);\r\n            if (max_move > this.state.max_tremor_R) this.setState({max_tremor_R:max_move});\r\n          }\r\n          else{\r\n            this.setState({last_hand_R: landmarks});\r\n          }\r\n          this.setState({still_array_R:[...this.state.still_array_R, max_move],\r\n            still_time_array_R:[...this.state.still_time_array_R, current_moment],\r\n          });\r\n        })\r\n      }\r\n    }\r\n\r\n    this.setState({record:[]});\r\n  }\r\n\r\n  async stop_record() {\r\n    clearInterval(this.state.ID);\r\n    await this.inference();\r\n    this.setState({recording:false,\r\n      finger_done:false,\r\n      rotate_done:false,\r\n      fist_done:false});\r\n    this.compose_chart();\r\n  }\r\n\r\n  exportToJson = (objectData, filename) => {\r\n    let contentType = \"application/json;charset=utf-8;\";\r\n    if (window.navigator && window.navigator.msSaveOrOpenBlob) {\r\n      var blob = new Blob([decodeURIComponent(encodeURI(JSON.stringify(objectData)))], { type: contentType });\r\n      navigator.msSaveOrOpenBlob(blob, filename);\r\n    } else {\r\n      var a = document.createElement('a');\r\n      a.download = filename;\r\n      a.href = 'data:' + contentType + ',' + encodeURIComponent(JSON.stringify(objectData));\r\n      a.target = '_blank';\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n    }\r\n  }\r\n \r\n  getArray = () => {\r\n    let remark = document.getElementById(\"Remarks\").value;\r\n    let ID = Date().toString();\r\n    let dict = {\r\n      remark:remark,\r\n      dist_array_L : this.state.dist_array_L,\r\n      dist_time_array_L : this.state.dist_time_array_L,\r\n      rotate_array_L : this.state.rotate_array_L,\r\n      rotate_time_array_L : this.state.rotate_time_array_L,\r\n      fist_array_L : this.state.fist_array_L,\r\n      fist_time_array_L : this.state.fist_time_array_L,\r\n      still_array_L : this.state.still_array_L,\r\n      still_time_array_L : this.state.still_time_array_L,\r\n      hand_dist_array_L : this.state.hand_dist_array_L,\r\n      hand_rotate_array_L : this.state.hand_rotate_array_L,\r\n      hand_fist_array_L : this.state.hand_fist_array_L,\r\n      hand_still_array_L : this.state.hand_still_array_L,\r\n      dist_array_R : this.state.dist_array_R,\r\n      dist_time_array_R : this.state.dist_time_array_R,\r\n      rotate_array_R : this.state.rotate_array_R,\r\n      rotate_time_array_R : this.state.rotate_time_array_R,\r\n      fist_array_R : this.state.fist_array_R,\r\n      fist_time_array_R : this.state.fist_time_array_R,\r\n      still_array_R : this.state.still_array_R,\r\n      still_time_array_R : this.state.still_time_array_R,\r\n      hand_dist_array_R : this.state.hand_dist_array_R,\r\n      hand_rotate_array_R : this.state.hand_rotate_array_R,\r\n      hand_fist_array_R : this.state.hand_fist_array_R,\r\n      hand_still_array_R : this.state.hand_still_array_R,\r\n    }\r\n    let PD = document.getElementById(\"PD\").value;\r\n    let Score = document.getElementById(\"Score\").value;\r\n    let PID = document.getElementById(\"Patient_ID\").value;\r\n    console.log(PD, Score);\r\n    this.exportToJson(dict, \"ID \"+ PID +\" Record \"+ID+\" Label \" + PD + \" \" + Score);\r\n  }\r\n\r\n  render(){\r\n    const videoConstraints = {\r\n      facingMode: this.state.facingMode\r\n    };\r\n    let button_1 = null;\r\n    let button_2 = null;\r\n    switch(this.state.stage){\r\n      case 1:\r\n        button_1 = <Button disabled={this.state.recording} variant=\"contained\" color=\"primary\"  onClick={this.next_step}>Finish Finger Tapping Left (Real Time)</Button>;\r\n        button_2 = <Button disabled={this.state.real_time_inferencing} variant=\"contained\" color=\"secondary\" onClick={this.next_step}>Finish Finger Tapping Left (Record)</Button>;\r\n        break;\r\n      case 2:\r\n        button_1 = <Button disabled={this.state.recording} variant=\"contained\" color=\"primary\"  onClick={this.next_step}>Finish Finger Tapping Right (Real Time)</Button>;\r\n        button_2 = <Button disabled={this.state.real_time_inferencing} variant=\"contained\" color=\"secondary\" onClick={this.next_step}>Finish Finger Tapping Right (Record)</Button>;\r\n        break;\r\n      case 3:\r\n        button_1 = <Button disabled={this.state.recording} variant=\"contained\" color=\"primary\"  onClick={this.next_step}>Finish Rotation Left (Real Time)</Button>;\r\n        button_2 = <Button disabled={this.state.real_time_inferencing} variant=\"contained\" color=\"secondary\" onClick={this.next_step}>Finish Rotation Left (Record)</Button>;\r\n        break;\r\n      case 4:\r\n        button_1 = <Button disabled={this.state.recording} variant=\"contained\" color=\"primary\"  onClick={this.next_step}>Finish Rotation Right (Real Time)</Button>;\r\n        button_2 = <Button disabled={this.state.real_time_inferencing} variant=\"contained\" color=\"secondary\" onClick={this.next_step}>Finish Rotation Right (Record)</Button>;\r\n        break;\r\n      case 5:\r\n        button_1 = <Button disabled={this.state.recording} variant=\"contained\" color=\"primary\"  onClick={this.next_step}>Finish Gripping Left (Real Time)</Button>;\r\n        button_2 = <Button disabled={this.state.real_time_inferencing} variant=\"contained\" color=\"secondary\" onClick={this.next_step}>Finish Gripping Left (Record)</Button>;\r\n        break;\r\n      case 6:\r\n        button_1 = <Button disabled={this.state.recording} variant=\"contained\" color=\"primary\"  onClick={this.next_step}>Finish Gripping Right (Real Time)</Button>;\r\n        button_2 = <Button disabled={this.state.real_time_inferencing} variant=\"contained\" color=\"secondary\" onClick={this.next_step}>Finish Gripping Right (Record)</Button>;\r\n        break;\r\n      case 7:\r\n        button_1 = <Button disabled={this.state.recording} variant=\"contained\" color=\"primary\"  onClick={this.next_step}>Finish Resting Left (Real Time)</Button>;\r\n        button_2 = <Button disabled={this.state.real_time_inferencing} variant=\"contained\" color=\"secondary\" onClick={this.next_step}>Finish Resting Left (Record)</Button>;\r\n        break;\r\n      case 8:\r\n        button_1 = <Button disabled={this.state.recording} variant=\"contained\" color=\"primary\"  onClick={this.next_step}>Finish Resting Right (Real Time)</Button>;\r\n        button_2 = <Button disabled={this.state.real_time_inferencing} variant=\"contained\" color=\"secondary\" onClick={this.next_step}>Finish Resting Right (Record)</Button>;\r\n        break;\r\n      default:\r\n        button_1 = <Button disabled={this.state.recording} variant=\"contained\" color=\"primary\"  onClick={this.runHandpose}>Start Test (Real Time)</Button>;\r\n        button_2 = <Button disabled={this.state.real_time_inferencing} variant=\"contained\" color=\"secondary\" onClick={this.record_video}>Start Test (Record)</Button>;\r\n        break;\r\n    }\r\n    return (\r\n      <div className=\"App\">\r\n        <header className=\"App-header\">\r\n        <Webcam\r\n          ref={this.webcamRef}\r\n          videoConstraints={videoConstraints}\r\n          style={{\r\n            position: \"absolute\",\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n            left: 0,\r\n            right: 0,\r\n            textAlign: \"center\",\r\n            zindex: 9,\r\n            width: \"auto\",\r\n            height: \"auto\",\r\n          }}\r\n        />\r\n        <canvas\r\n          ref={this.canvasRef}\r\n          style={{\r\n            position: \"absolute\",\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n            left: 0,\r\n            right: 0,\r\n            textAlign: \"center\",\r\n            zindex: 9,\r\n            width: \"auto\",\r\n            height: \"auto\",\r\n          }}\r\n        />\r\n        </header>\r\n          {this.state.button_mode ? (\r\n            <div>\r\n              <button onClick={this.increment_tap1} id=\"button1\">Index Finger</button>\r\n              <button onClick={this.increment_tap2} id=\"button2\">Middle Finger</button>\r\n            </div>\r\n          ) : (\r\n            <div></div>\r\n          )}\r\n\r\n          <div>\r\n            <div>{button_1}</div>\r\n            <div>{button_2}</div>\r\n            <div>\r\n              <Button disabled={this.state.recording||this.state.real_time_inferencing} variant=\"outlined\" color=\"secondary\" onClick={this.reset_counter}>\r\n                Reset All\r\n              </Button>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <h5>\r\n              Finger Tapping Count:{this.state.tap_count.length}&nbsp;&nbsp;&nbsp;&nbsp;\r\n              Rotate Count:{this.state.rotate_count.length}&nbsp;&nbsp;&nbsp;&nbsp;\r\n              Gripping Count: {this.state.fist_count.length}&nbsp;&nbsp;&nbsp;&nbsp;\r\n              FPS: {this.state.avg_fps}\r\n            </h5>\r\n          </div>\r\n          <div>\r\n            <div>\r\n              <img src={handline} className=\"handline\" alt='anything'/>\r\n            </div>\r\n            <div>\r\n              <small>Enter Vertical Distance (cm)</small>\r\n              <input type=\"number\" id=\"real_measurement_v\" onChange={this.compose_chart} step=\"0.001\" min='0' max='20'></input>\r\n            </div>\r\n            <div>\r\n              <small>Enter Horizontal Distance (cm)</small>\r\n              <input type=\"number\" id=\"real_measurement_h\" onChange={this.compose_chart} step=\"0.001\" min='0' max='20'></input>\r\n            </div>\r\n            <button disabled={!this.state.chart_ready} onClick={this.switch_style}>Switch Chart Style</button>\r\n            <button onClick={this.switch_cam}>Switch Camera</button>\r\n          </div>\r\n          <div>\r\n            <small>Experimental Features</small>\r\n            <button disabled={this.state.recording||this.state.real_time_inferencing} onClick={this.runPosenet}>PoseNet</button>\r\n            <button disabled={this.state.recording||this.state.real_time_inferencing} onClick={this.runFacemesh}>Facemesh</button>\r\n            <button disabled={this.state.recording||this.state.real_time_inferencing} onClick={this.switch_button}>Switch On/Off Button</button>\r\n          </div>\r\n          <div>\r\n            {this.state.chart_ready ? (\r\n              <div>\r\n                <Line data={this.state.chart_data1_L} />\r\n                <Line data={this.state.chart_data1_R} />\r\n                <Line data={this.state.chart_data2_L} />\r\n                <Line data={this.state.chart_data2_R} />\r\n                <Line data={this.state.chart_data3_L} />\r\n                <Line data={this.state.chart_data3_R} />\r\n                <Line data={this.state.chart_data4_L} />\r\n                <Line data={this.state.chart_data4_R} />\r\n              </div>\r\n            ) : (\r\n              <div/>\r\n            )}\r\n            <div>\r\n              <small>UPDRS Score, X for N/A, Could be Empty</small>\r\n              <input type=\"text\" id=\"Score\"></input>\r\n            </div>\r\n            <div>\r\n              <small>Patient ID</small>\r\n              <input type=\"text\" id=\"Patient_ID\"></input> \r\n              <small>Special Remarks</small>\r\n              <input type=\"text\" id=\"Remarks\"></input> \r\n            </div>\r\n            <select name=\"PD\" id=\"PD\">\r\n              <option value=\"0\">Control</option>\r\n              <option value=\"1\">RBD</option>\r\n              <option value=\"2\">PD(with medication)</option>\r\n              <option value=\"3\">PD(without medication)</option>\r\n            </select>\r\n            <button onClick={this.getArray}>Get Array</button>\r\n            <div>\r\n              <input type=\"file\" id=\"upload-json\"></input>\r\n            </div>\r\n            <div>\r\n              <input type=\"file\" id=\"upload-weights\"></input>\r\n            </div>\r\n          </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}