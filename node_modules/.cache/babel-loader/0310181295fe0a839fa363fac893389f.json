{"ast":null,"code":"/**\r\n * @license\r\n * Copyright 2020 Google LLC. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the License);\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an AS IS BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * =============================================================================\r\n */\nimport { Abs, util } from '@tensorflow/tfjs-core';\nexport function simpleAbsImpl(vals) {\n  var resultValues = new Float32Array(vals.length);\n\n  for (var i = 0; i < vals.length; ++i) {\n    resultValues[i] = Math.abs(vals[i]);\n  }\n\n  return resultValues;\n}\nexport var absKernelFunc = function absKernelFunc(args) {\n  var x = args.inputs.x;\n  var cpuBackend = args.backend;\n  var resultValues = new Float32Array(util.sizeFromShape(x.shape));\n\n  if (x.dtype !== 'complex64') {\n    var values = cpuBackend.data.get(x.dataId).values;\n    resultValues = simpleAbsImpl(values);\n  } else {\n    var complexVals = cpuBackend.data.get(x.dataId);\n    var real = complexVals.complexTensorInfos.real;\n    var imag = complexVals.complexTensorInfos.imag;\n    var realVals = cpuBackend.data.get(real.dataId).values;\n    var imagVals = cpuBackend.data.get(imag.dataId).values;\n\n    for (var i = 0; i < realVals.length; i++) {\n      var _real = realVals[i];\n      var _imag = imagVals[i];\n      resultValues[i] = Math.hypot(_real, _imag);\n    }\n  }\n\n  return cpuBackend.makeOutput(resultValues, x.shape, 'float32');\n};\nexport var absConfig = {\n  kernelName: Abs,\n  backendName: 'cpu',\n  kernelFunc: absKernelFunc\n};","map":{"version":3,"sources":["../../src/kernels/Abs.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;AAeG;AAEH,SAAQ,GAAR,EAA8D,IAA9D,QAAyE,uBAAzE;AAIA,OAAM,SAAU,aAAV,CAAwB,IAAxB,EAAwC;AAC5C,MAAM,YAAY,GAAG,IAAI,YAAJ,CAAiB,IAAI,CAAC,MAAtB,CAArB;;AACA,OAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,IAAI,CAAC,MAAzB,EAAiC,EAAE,CAAnC,EAAsC;AACpC,IAAA,YAAY,CAAC,CAAD,CAAZ,GAAkB,IAAI,CAAC,GAAL,CAAS,IAAI,CAAC,CAAD,CAAb,CAAlB;AACD;;AACD,SAAO,YAAP;AACD;AAED,OAAO,IAAM,aAAa,GACtB,SADS,aACT,CAAC,IAAD,EAAuD;AAAA,MAC9C,CAD8C,GACzC,IAAI,CAAC,MADoC,CAC9C,CAD8C;AAErD,MAAM,UAAU,GAAG,IAAI,CAAC,OAAxB;AACA,MAAI,YAAY,GAAG,IAAI,YAAJ,CAAiB,IAAI,CAAC,aAAL,CAAmB,CAAC,CAAC,KAArB,CAAjB,CAAnB;;AACA,MAAI,CAAC,CAAC,KAAF,KAAY,WAAhB,EAA6B;AAC3B,QAAM,MAAM,GAAG,UAAU,CAAC,IAAX,CAAgB,GAAhB,CAAoB,CAAC,CAAC,MAAtB,EAA8B,MAA7C;AACA,IAAA,YAAY,GAAG,aAAa,CAAC,MAAD,CAA5B;AACD,GAHD,MAGO;AACL,QAAM,WAAW,GAAG,UAAU,CAAC,IAAX,CAAgB,GAAhB,CAAoB,CAAC,CAAC,MAAtB,CAApB;AACA,QAAM,IAAI,GAAG,WAAW,CAAC,kBAAZ,CAA+B,IAA5C;AACA,QAAM,IAAI,GAAG,WAAW,CAAC,kBAAZ,CAA+B,IAA5C;AACA,QAAM,QAAQ,GACV,UAAU,CAAC,IAAX,CAAgB,GAAhB,CAAoB,IAAI,CAAC,MAAzB,EAAiC,MADrC;AAEA,QAAM,QAAQ,GACV,UAAU,CAAC,IAAX,CAAgB,GAAhB,CAAoB,IAAI,CAAC,MAAzB,EAAiC,MADrC;;AAEA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,QAAQ,CAAC,MAA7B,EAAqC,CAAC,EAAtC,EAA0C;AACxC,UAAM,KAAI,GAAG,QAAQ,CAAC,CAAD,CAArB;AACA,UAAM,KAAI,GAAG,QAAQ,CAAC,CAAD,CAArB;AACA,MAAA,YAAY,CAAC,CAAD,CAAZ,GAAkB,IAAI,CAAC,KAAL,CAAW,KAAX,EAAiB,KAAjB,CAAlB;AACD;AACF;;AACD,SAAO,UAAU,CAAC,UAAX,CAAsB,YAAtB,EAAoC,CAAC,CAAC,KAAtC,EAA6C,SAA7C,CAAP;AACD,CAvBE;AAyBP,OAAO,IAAM,SAAS,GAAiB;AACrC,EAAA,UAAU,EAAE,GADyB;AAErC,EAAA,WAAW,EAAE,KAFwB;AAGrC,EAAA,UAAU,EAAE;AAHyB,CAAhC","sourceRoot":"","sourcesContent":["/**\r\n * @license\r\n * Copyright 2020 Google LLC. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the License);\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an AS IS BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * =============================================================================\r\n */\r\nimport { Abs, util } from '@tensorflow/tfjs-core';\r\nexport function simpleAbsImpl(vals) {\r\n    const resultValues = new Float32Array(vals.length);\r\n    for (let i = 0; i < vals.length; ++i) {\r\n        resultValues[i] = Math.abs(vals[i]);\r\n    }\r\n    return resultValues;\r\n}\r\nexport const absKernelFunc = (args) => {\r\n    const { x } = args.inputs;\r\n    const cpuBackend = args.backend;\r\n    let resultValues = new Float32Array(util.sizeFromShape(x.shape));\r\n    if (x.dtype !== 'complex64') {\r\n        const values = cpuBackend.data.get(x.dataId).values;\r\n        resultValues = simpleAbsImpl(values);\r\n    }\r\n    else {\r\n        const complexVals = cpuBackend.data.get(x.dataId);\r\n        const real = complexVals.complexTensorInfos.real;\r\n        const imag = complexVals.complexTensorInfos.imag;\r\n        const realVals = cpuBackend.data.get(real.dataId).values;\r\n        const imagVals = cpuBackend.data.get(imag.dataId).values;\r\n        for (let i = 0; i < realVals.length; i++) {\r\n            const real = realVals[i];\r\n            const imag = imagVals[i];\r\n            resultValues[i] = Math.hypot(real, imag);\r\n        }\r\n    }\r\n    return cpuBackend.makeOutput(resultValues, x.shape, 'float32');\r\n};\r\nexport const absConfig = {\r\n    kernelName: Abs,\r\n    backendName: 'cpu',\r\n    kernelFunc: absKernelFunc,\r\n};\r\n//# sourceMappingURL=Abs.js.map"]},"metadata":{},"sourceType":"module"}