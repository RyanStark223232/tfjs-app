{"ast":null,"code":"(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else {\n    root.captureVideoFrame = factory();\n  }\n})(this, function () {\n  return function captureVideoFrame(video, format, quality) {\n    if (typeof video === 'string') {\n      video = document.getElementById(video);\n    }\n\n    format = format || 'jpeg';\n    quality = quality || 0.92;\n\n    if (!video || format !== 'png' && format !== 'jpeg') {\n      return false;\n    }\n\n    var canvas = document.createElement(\"CANVAS\");\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    canvas.getContext('2d').drawImage(video, 0, 0);\n    var dataUri = canvas.toDataURL('image/' + format, quality);\n    var data = dataUri.split(',')[1];\n    var mimeType = dataUri.split(';')[0].slice(5);\n    var bytes = window.atob(data);\n    var buf = new ArrayBuffer(bytes.length);\n    var arr = new Uint8Array(buf);\n\n    for (var i = 0; i < bytes.length; i++) {\n      arr[i] = bytes.charCodeAt(i);\n    }\n\n    var blob = new Blob([arr], {\n      type: mimeType\n    });\n    return {\n      blob: blob,\n      dataUri: dataUri,\n      format: format\n    };\n  };\n});","map":{"version":3,"sources":["C:/Users/wongh/finger/node_modules/capture-video-frame/capture-video-frame.js"],"names":["root","factory","define","amd","captureVideoFrame","video","format","quality","document","getElementById","canvas","createElement","width","videoWidth","height","videoHeight","getContext","drawImage","dataUri","toDataURL","data","split","mimeType","slice","bytes","window","atob","buf","ArrayBuffer","length","arr","Uint8Array","i","charCodeAt","blob","Blob","type"],"mappings":"AAAC,WAAUA,IAAV,EAAgBC,OAAhB,EAAyB;AACtB,MAAI,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACC,GAA3C,EAAgD;AAC5CD,IAAAA,MAAM,CAAC,EAAD,EAAKD,OAAL,CAAN;AACH,GAFD,MAEO;AACHD,IAAAA,IAAI,CAACI,iBAAL,GAAyBH,OAAO,EAAhC;AACH;AACJ,CANA,EAMC,IAND,EAMO,YAAY;AAChB,SAAO,SAASG,iBAAT,CAA2BC,KAA3B,EAAkCC,MAAlC,EAA0CC,OAA1C,EAAmD;AACtD,QAAI,OAAOF,KAAP,KAAiB,QAArB,EAA+B;AAC3BA,MAAAA,KAAK,GAAGG,QAAQ,CAACC,cAAT,CAAwBJ,KAAxB,CAAR;AACH;;AAEDC,IAAAA,MAAM,GAAGA,MAAM,IAAI,MAAnB;AACAC,IAAAA,OAAO,GAAGA,OAAO,IAAI,IAArB;;AAEA,QAAI,CAACF,KAAD,IAAWC,MAAM,KAAK,KAAX,IAAoBA,MAAM,KAAK,MAA9C,EAAuD;AACnD,aAAO,KAAP;AACH;;AAED,QAAII,MAAM,GAAGF,QAAQ,CAACG,aAAT,CAAuB,QAAvB,CAAb;AAEAD,IAAAA,MAAM,CAACE,KAAP,GAAeP,KAAK,CAACQ,UAArB;AACAH,IAAAA,MAAM,CAACI,MAAP,GAAgBT,KAAK,CAACU,WAAtB;AAEAL,IAAAA,MAAM,CAACM,UAAP,CAAkB,IAAlB,EAAwBC,SAAxB,CAAkCZ,KAAlC,EAAyC,CAAzC,EAA4C,CAA5C;AAEA,QAAIa,OAAO,GAAGR,MAAM,CAACS,SAAP,CAAiB,WAAWb,MAA5B,EAAoCC,OAApC,CAAd;AACA,QAAIa,IAAI,GAAGF,OAAO,CAACG,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAX;AACA,QAAIC,QAAQ,GAAGJ,OAAO,CAACG,KAAR,CAAc,GAAd,EAAmB,CAAnB,EAAsBE,KAAtB,CAA4B,CAA5B,CAAf;AAEA,QAAIC,KAAK,GAAGC,MAAM,CAACC,IAAP,CAAYN,IAAZ,CAAZ;AACA,QAAIO,GAAG,GAAG,IAAIC,WAAJ,CAAgBJ,KAAK,CAACK,MAAtB,CAAV;AACA,QAAIC,GAAG,GAAG,IAAIC,UAAJ,CAAeJ,GAAf,CAAV;;AAEA,SAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,KAAK,CAACK,MAA1B,EAAkCG,CAAC,EAAnC,EAAuC;AACnCF,MAAAA,GAAG,CAACE,CAAD,CAAH,GAASR,KAAK,CAACS,UAAN,CAAiBD,CAAjB,CAAT;AACH;;AAED,QAAIE,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAAEL,GAAF,CAAT,EAAkB;AAAEM,MAAAA,IAAI,EAAEd;AAAR,KAAlB,CAAX;AACA,WAAO;AAAEY,MAAAA,IAAI,EAAEA,IAAR;AAAchB,MAAAA,OAAO,EAAEA,OAAvB;AAAgCZ,MAAAA,MAAM,EAAEA;AAAxC,KAAP;AACH,GAjCD;AAkCH,CAzCA,CAAD","sourcesContent":["(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define([], factory);\n    } else {\n        root.captureVideoFrame = factory();\n    }\n}(this, function () {\n    return function captureVideoFrame(video, format, quality) {\n        if (typeof video === 'string') {\n            video = document.getElementById(video);\n        }\n\n        format = format || 'jpeg';\n        quality = quality || 0.92;\n\n        if (!video || (format !== 'png' && format !== 'jpeg')) {\n            return false;\n        }\n\n        var canvas = document.createElement(\"CANVAS\");\n\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n\n        canvas.getContext('2d').drawImage(video, 0, 0);\n\n        var dataUri = canvas.toDataURL('image/' + format, quality);\n        var data = dataUri.split(',')[1];\n        var mimeType = dataUri.split(';')[0].slice(5)\n\n        var bytes = window.atob(data);\n        var buf = new ArrayBuffer(bytes.length);\n        var arr = new Uint8Array(buf);\n\n        for (var i = 0; i < bytes.length; i++) {\n            arr[i] = bytes.charCodeAt(i);\n        }\n\n        var blob = new Blob([ arr ], { type: mimeType });\n        return { blob: blob, dataUri: dataUri, format: format };\n    };\n}));\n"]},"metadata":{},"sourceType":"script"}