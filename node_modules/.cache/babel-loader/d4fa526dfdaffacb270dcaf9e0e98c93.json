{"ast":null,"code":"/**\r\n * @license\r\n * Copyright 2018 Google LLC. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * =============================================================================\r\n */\nimport { slice } from '../ops/slice'; // TODO(annxingyuan): Use this helper in WASM Split kernel once intermediate\n// kernels have been modularized in WebGL and CPU\n// https://github.com/tensorflow/tfjs/issues/2822.\n\n/** Shared implementation of the split kernel across WebGL and CPU. */\n\nexport function split(x, sizeSplits, axis) {\n  const begin = new Array(x.rank).fill(0);\n  const size = x.shape.slice();\n  return sizeSplits.map(s => {\n    const sliceSize = [...size];\n    sliceSize[axis] = s;\n    const sliceT = slice(x, begin, sliceSize);\n    begin[axis] += s;\n    return sliceT;\n  });\n}","map":{"version":3,"sources":["../../src/backends/split_shared.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;AAeG;AAEH,SAAQ,KAAR,QAAoB,cAApB,C,CAGA;AACA;AACA;;AACA;;AACA,OAAM,SAAU,KAAV,CACF,CADE,EACI,UADJ,EAC0B,IAD1B,EACsC;AAC1C,QAAM,KAAK,GAAG,IAAI,KAAJ,CAAU,CAAC,CAAC,IAAZ,EAAkB,IAAlB,CAAuB,CAAvB,CAAd;AACA,QAAM,IAAI,GAAG,CAAC,CAAC,KAAF,CAAQ,KAAR,EAAb;AACA,SAAO,UAAU,CAAC,GAAX,CAAe,CAAC,IAAG;AACxB,UAAM,SAAS,GAAG,CAAC,GAAG,IAAJ,CAAlB;AACA,IAAA,SAAS,CAAC,IAAD,CAAT,GAAkB,CAAlB;AACA,UAAM,MAAM,GAAG,KAAK,CAAC,CAAD,EAAI,KAAJ,EAAW,SAAX,CAApB;AACA,IAAA,KAAK,CAAC,IAAD,CAAL,IAAe,CAAf;AACA,WAAO,MAAP;AACD,GANM,CAAP;AAOD","sourceRoot":"","sourcesContent":["/**\r\n * @license\r\n * Copyright 2018 Google LLC. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * =============================================================================\r\n */\r\nimport { slice } from '../ops/slice';\r\n// TODO(annxingyuan): Use this helper in WASM Split kernel once intermediate\r\n// kernels have been modularized in WebGL and CPU\r\n// https://github.com/tensorflow/tfjs/issues/2822.\r\n/** Shared implementation of the split kernel across WebGL and CPU. */\r\nexport function split(x, sizeSplits, axis) {\r\n    const begin = new Array(x.rank).fill(0);\r\n    const size = x.shape.slice();\r\n    return sizeSplits.map(s => {\r\n        const sliceSize = [...size];\r\n        sliceSize[axis] = s;\r\n        const sliceT = slice(x, begin, sliceSize);\r\n        begin[axis] += s;\r\n        return sliceT;\r\n    });\r\n}\r\n//# sourceMappingURL=split_shared.js.map"]},"metadata":{},"sourceType":"module"}