(this["webpackJsonptfjs-app"]=this["webpackJsonptfjs-app"]||[]).push([[0],{292:function(e,t,n){e.exports=n(314)},297:function(e,t,n){},303:function(e,t){},304:function(e,t){},312:function(e,t){},313:function(e,t,n){},314:function(e,t,n){"use strict";n.r(t);var a=n(38),r=n.n(a),o=n(226),c=n.n(o),s=(n(297),n(18)),i=n(11),l=n.n(i),u=n(14),d=n(10),f=n(15),h=n(60),m=n(128),p=n(127),v=n(243),b=(n(313),n(318)),y=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var o;return Object(d.a)(this,a),(o=t.call(this,e)).loadVideo=function(e){var t=URL.createObjectURL(e.target.files[0]);o.setState({videoPath:t});var n=document.getElementById("user-video");n.src=t,n.onloadeddata=function(){n.play()},n.load()},o.exportToJson=function(e,t){if(window.navigator&&window.navigator.msSaveOrOpenBlob){var n=new Blob([decodeURIComponent(encodeURI(JSON.stringify(e)))],{type:"application/json;charset=utf-8;"});navigator.msSaveOrOpenBlob(n,t)}else{var a=document.createElement("a");a.download=t,a.href="data:application/json;charset=utf-8;,"+encodeURIComponent(JSON.stringify(e)),a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)}},o.getArray=function(){var e=document.getElementById("fname").value,t={time:o.state.time_array,result:o.state.result_array};console.log(t),o.exportToJson(t,e)},o.norm=function(e,t){return Object(b.b)(Object(b.a)(e[0]-t[0],2)+Object(b.a)(e[1]-t[1],2))},o.reset_record=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Reseting Arrays"),e.next=3,o.setState({hand_array:[],time_array:[],result_array:[]});case 3:o.sleep(100),console.log("Hands: ",o.state.hand_array),console.log("Result: ",o.state.result_array);case 6:case"end":return e.stop()}}),e)}))),o.sleep=function(e){return new Promise((function(t){return setTimeout(t,e)}))},o.inference=Object(u.a)(l.a.mark((function e(){var t,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.sleep(300),n(224),e.next=4,v.a();case 4:t=e.sent,console.log("Handpose model loaded."),a=0;case 7:if(!(a<o.state.hand_array.length)){e.next=15;break}return e.next=10,t.estimateHands(o.state.hand_array[a]);case 10:(r=e.sent).length>0?r.forEach((function(e){o.setState({result_array:[].concat(Object(s.a)(o.state.result_array),[e])})})):o.setState({result_array:[].concat(Object(s.a)(o.state.result_array),[null])});case 12:a++,e.next=7;break;case 15:case"end":return e.stop()}}),e)}))),o.state={ID:null,hand_array:[],time_array:[],result_array:[],startAt:Date.now()},o.canvasRef=r.a.createRef(null),o.sleep=o.sleep.bind(Object(h.a)(o)),o.inference=o.inference.bind(Object(h.a)(o)),o.norm=o.norm.bind(Object(h.a)(o)),o.getArray=o.getArray.bind(Object(h.a)(o)),o.exportToJson=o.exportToJson.bind(Object(h.a)(o)),o.record_video=o.record_video.bind(Object(h.a)(o)),o.stop_record=o.stop_record.bind(Object(h.a)(o)),o.reset_record=o.reset_record.bind(Object(h.a)(o)),n(224),o.net=null,o}return Object(f.a)(a,[{key:"record_video",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Start Recording"),this.setState({startAt:Date.now()}),t=setInterval((function(){n.concat_frame()}),50),this.setState({ID:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"concat_frame",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementById("user-video"),this.canvasRef.current.width=t.videoWidth,this.canvasRef.current.height=t.videoHeight,this.canvasRef.current.getContext("2d").drawImage(t,0,0,this.canvasRef.current.width,this.canvasRef.current.height),n=(Date.now()-this.state.startAt)/1e3,(a=document.createElement("img")).src=this.canvasRef.current.toDataURL(),a.onload=function(){this.setState({hand_array:[].concat(Object(s.a)(this.state.hand_array),[a]),time_array:[].concat(Object(s.a)(this.state.time_array),[n])})}.bind(this);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop_record",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Stop Recording"),clearInterval(this.state.ID),document.getElementById("user-video").pause(),e.next=6,this.inference();case 6:console.log("Inference Finished");case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"}),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("video",{id:"user-video",crossOrigin:"anonymous",controls:"controls"},r.a.createElement("source",{id:"source",type:"video/mp4"}))),r.a.createElement("div",null,r.a.createElement("input",{type:"file",id:"videof",onChange:this.loadVideo})),r.a.createElement("button",{onClick:this.record_video},"1.Record"),r.a.createElement("button",{onClick:this.stop_record},"2.Run Inference"),r.a.createElement("button",{onClick:this.reset_record},"4.Reset Recording"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",id:"fname"}),r.a.createElement("button",{onClick:this.getArray},"3.Get Array"))),r.a.createElement("div",null,r.a.createElement("canvas",{ref:this.canvasRef,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:9,width:"auto",height:"auto"}})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[292,1,2]]]);
//# sourceMappingURL=main.050bba88.chunk.js.map